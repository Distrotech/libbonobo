<STRUCT>
<NAME>BonoboActivationInfo</NAME>
typedef struct
{
	char *iid;		/* Implementation ID */
	char *user;		/* You owe this field to boc */
	char *host;		/* DNS name or IP address */
	char *domain;		/* This is not a DNS domain, but an activation domain */
} BonoboActivationInfo;
</STRUCT>

<ENUM>
<NAME>Bonobo_ActivationPropertyType</NAME>
   typedef enum
   {
      Bonobo_ACTIVATION_P_STRING,
      Bonobo_ACTIVATION_P_NUMBER,
      Bonobo_ACTIVATION_P_BOOLEAN,
      Bonobo_ACTIVATION_P_STRINGV
   }
   Bonobo_ActivationPropertyType;
</ENUM>

<STRUCT>
<NAME>Bonobo_ActivationProperty</NAME>
   typedef struct
   {
      CORBA_string name;
      Bonobo_ActivationPropertyValue v;
   }
   Bonobo_ActivationProperty;
</STRUCT>


<STRUCT>
<NAME>Bonobo_ActivationPropertyValue</NAME>
   typedef struct
   {
      Bonobo_ActivationPropertyType _d;
      union
      {
	 CORBA_string value_string;
	 CORBA_double value_number;
	 CORBA_boolean value_boolean;
	 Bonobo_StringList value_stringv;
      }
      _u;
   }
   Bonobo_ActivationPropertyValue;
</STRUCT>

<STRUCT>
<NAME>Bonobo_ServerInfo</NAME>
   typedef struct
   {
      Bonobo_ImplementationID iid;
      CORBA_string server_type;
      CORBA_string location_info;
      CORBA_string username;
      CORBA_string hostname;
      CORBA_string domain;
      CORBA_sequence_Bonobo_ActivationProperty props;
   }
   Bonobo_ServerInfo;
</STRUCT>

<ENUM>
<NAME>Bonobo_RegistrationResult</NAME>
   typedef enum
   {
      Bonobo_ACTIVATION_REG_SUCCESS,
      Bonobo_ACTIVATION_REG_NOT_LISTED,
      Bonobo_ACTIVATION_REG_ALREADY_ACTIVE,
      Bonobo_ACTIVATION_REG_ERROR
   }
   Bonobo_RegistrationResult;
</ENUM>

<TYPEDEF>
<NAME>Bonobo_ActivationFlags</NAME>
   typedef CORBA_long Bonobo_ActivationFlags;
#define Bonobo_ACTIVATION_FLAG_NO_LOCAL 1          /* no shared libraries */
#define Bonobo_ACTIVATION_FLAG_PRIVATE 2           /* start a new server and don't register it */
#define Bonobo_ACTIVATION_FLAG_EXISTING_ONLY 4     /* don't start the server if not started */
</TYPEDEF>

<TYPEDEF>
<NAME>Bonobo_ActivationID</NAME>
   typedef CORBA_string Bonobo_ActivationID;
</TYPEDEF>

<TYPEDEF>
<NAME>Bonobo_ImplementationID</NAME>
   typedef CORBA_string Bonobo_ImplementationID;
</TYPEDEF>

<FUNCTION>
<RETURNS>Bonobo_ActivationID</RETURNS>
<NAME>bonobo_activation_info_stringify</NAME>
const BonoboActivationInfo * actinfo
</FUNCTION>

<FUNCTION>
<RETURNS>BonoboActivationInfo *</RETURNS>
<NAME>bonobo_activation_servinfo_to_actinfo</NAME>
const Bonobo_ServerInfo * servinfo
</FUNCTION>

<FUNCTION>
<RETURNS>BonoboActivationInfo *</RETURNS>
<NAME>bonobo_activation_id_parse</NAME>
const CORBA_char *actid
</FUNCTION>

<FUNCTION>
<RETURNS>BonoboActivationInfo *</RETURNS>
<NAME>bonobo_activation_info_new</NAME>
void
</FUNCTION>

<FUNCTION>
<RETURNS>void</RETURNS>
<NAME>bonobo_activation_info_free</NAME>
BonoboActivationInfo * actinfo
</FUNCTION>

<FUNCTION>
<RETURNS>CORBA_Context </RETURNS>
<NAME>bonobo_activation_context_get</NAME>
void
</FUNCTION>

<FUNCTION>
<RETURNS>CORBA_ORB </RETURNS>
<NAME>bonobo_activation_orb_get</NAME>
void
</FUNCTION>

<FUNCTION>
<RETURNS>CORBA_ORB</RETURNS>
<NAME>bonobo_activation_init</NAME>
int argc, 
char **argv
</FUNCTION>

<FUNCTION>
<RETURNS>void</RETURNS>
<NAME>bonobo_activation_set_test_components_enabled</NAME>
gboolean val
</FUNCTION>


<FUNCTION>
<RETURNS>gboolean</RETURNS>
<NAME>bonobo_activation_get_test_components_enabled</NAME>
void
</FUNCTION>


<FUNCTION>
<RETURNS>gboolean</RETURNS>
<NAME>bonobo_activation_is_initialized</NAME>
void
</FUNCTION>

<FUNCTION>
<RETURNS>const char *</RETURNS>
<NAME>bonobo_activation_hostname_get</NAME>
void
</FUNCTION>

<FUNCTION>
<RETURNS>const char *</RETURNS>
<NAME>bonobo_activation_domain_get</NAME>
void
</FUNCTION>

<FUNCTION>
<RETURNS>const char *</RETURNS>
<NAME>bonobo_activation_session_name_get</NAME>
void
</FUNCTION>


<MACRO>
<NAME>bonobo_activation_username_get</NAME>
#define bonobo_activation_username_get() g_get_user_name()
</MACRO>

<STRUCT>
<NAME>BonoboActivationPluginObject</NAME>
typedef struct
{
	const char *iid;

	/* This routine should call oaf_plugin_use(servant, impl_ptr), 
         * as should all routines which activate CORBA objects
	 * implemented by this shared library. This needs to be done 
         * before making any CORBA calls on the object, or
	 * passing that object around. First thing after servant creation 
         * always works. :) 
         */

        CORBA_Object (*activate) (PortableServer_POA poa,
                                  const char *iid, 
                                  gpointer impl_ptr,	/* This pointer should be stored by the implementation
                                                         * to be passed to oaf_plugin_unuse() in the 
                                                         * implementation's destruction routine. */
				    CORBA_Environment * ev);
}
BonoboActivationPluginObject;
</STRUCT>

<STRUCT>
<NAME>BonoboActivationPlugin</NAME>
typedef struct
{
	const BonoboActivationPluginObject *plugin_object_list;
	const char *description;
}
BonoboActivationPlugin;
</STRUCT>



<FUNCTION>
<RETURNS>CORBA_Object</RETURNS>
<NAME>bonobo_activation_activate_shlib_server</NAME>
OAF_ActivationResult * sh, 
                                        CORBA_Environment * ev
</FUNCTION>

<FUNCTION>
<RETURNS>void</RETURNS>
<NAME>bonobo_activation_plugin_unuse</NAME>
gpointer impl_ptr
</FUNCTION>

<FUNCTION>
<RETURNS>void</RETURNS>
<NAME>bonobo_activation_plugin_use</NAME>
PortableServer_Servant servant, 
gpointer impl_ptr
</FUNCTION>

<FUNCTION>
<RETURNS>OAF_ServerInfoList *</RETURNS>
<NAME>bonobo_activation_query</NAME>
const char *requirements,
char *const *selection_order,
CORBA_Environment * ev
</FUNCTION>

<FUNCTION>
<RETURNS>CORBA_Object</RETURNS>
<NAME>bonobo_activation_activate_from_id</NAME>
const OAF_ActivationID aid,
OAF_ActivationFlags flags,
OAF_ActivationID * ret_aid,
CORBA_Environment * ev
</FUNCTION>

<FUNCTION>
<RETURNS>CORBA_Object</RETURNS>
<NAME>bonobo_activation_activate</NAME>
const char *requirements,
char *const *selection_order,
OAF_ActivationFlags flags,
OAF_ActivationID * ret_aid,
CORBA_Environment * ev
</FUNCTION>

<TYPEDEF>
<NAME>BonoboActivationCallback</NAME>
typedef void (*BonoboActivationCallback) (CORBA_Object   activated_object, 
                                          const char    *error_reason, 
				          gpointer       user_data);

</TYPEDEF>

<FUNCTION>
<RETURNS>void</RETURNS>
<NAME>bonobo_activation_activate_async</NAME>
const char *requirements,
char *const *selection_order,
OAF_ActivationFlags flags,
OAFActivationCallback callback,
gpointer user_data,
CORBA_Environment * ev
</FUNCTION>

<FUNCTION>
<RETURNS>void</RETURNS>
<NAME>bonobo_activation_activate_from_id_async</NAME>
const OAF_ActivationID aid,
OAF_ActivationFlags flags,
OAFActivationCallback callback,
gpointer user_data,
CORBA_Environment * ev
</FUNCTION>


<FUNCTION>
<NAME>bonobo_activation_active_server_unregister</NAME>
<RETURNS>void</RETURNS>
const char *iid, 
CORBA_Object obj
</FUNCTION>

<FUNCTION>
<RETURNS>OAF_RegistrationResult</RETURNS>
<NAME>bonobo_activation_active_server_register</NAME>
const char *iid,
						   CORBA_Object obj
</FUNCTION>

<FUNCTION>
<RETURNS>const char *</RETURNS>
<NAME>bonobo_server_info_prop_lookup</NAME>
Bonobo_ServerInfo * server,
const char *prop_name,
GSList * i18n_languages
</FUNCTION>

<FUNCTION>
<RETURNS>Bonobo_ActivationProperty *</RETURNS>
<NAME>bonobo_server_info_prop_find</NAME>
Bonobo_ServerInfo * server,
const char *prop_name
</FUNCTION>

<FUNCTION>
<RETURNS>Bonobo_ServerInfo *</RETURNS>
<NAME>Bonobo_ServerInfo_duplicate</NAME>
const Bonobo_ServerInfo *original
</FUNCTION>

<FUNCTION>
<RETURNS>CORBA_Object</RETURNS>
<NAME>bonobo_activation_name_service_get</NAME>
CORBA_Environment * ev
</FUNCTION>

<FUNCTION>
<RETURNS>const char *</RETURNS>
<NAME>bonobo_activation_activation_iid_get</NAME>
void
</FUNCTION>
