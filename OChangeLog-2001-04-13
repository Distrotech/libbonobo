2000-12-29  Michael Meeks  <michael@helixcode.com>

	* Version 0.31
	
2000-12-29  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-transient.c (bonobo_transient_construct): 
	re-add Federico's fixes.

	* configure.in (orbit_version): require ORBit 0.5.6

	* monikers/Bonobo_Moniker_std.oafinfo.in: glup type on same line
	as location to calm oaf-slay.
	add File extender.
	add Stream extender.

2000-12-28  Michael Meeks  <michael@helixcode.com>

	* idl/bonobo-storage.idl: add NotSupported exception to
	Stream::copyTo; this API is deadly broken.

	* bonobo/bonobo-ui-toolbar-icon.c (paint_with_pixbuf): if
	we hit a GDK_PARENT_RELATIVE pixmap we fall through to the
	pants rendering method.

2000-12-28  Vedat Hallac <mvhallac@crosswinds.net>

	* monikers/Makefile.am (Bonobo_Moniker_std.oafinfo): fix for
	different src and build dirs.

2000-12-28  Arturo Tena <arturo@directmail.org>

	* bonobo-idl/Makefile.am: Update CFLAGS / bonobo_idl_libs

2000-12-27  Richard Hult  <rhult@codefactory.se>

	* bonobo/bonobo-ui-util.c (bonobo_ui_util_get_ui_fname): 
	Added final NULL argument to g_strconcat call to prevent
	crash.

2000-12-24  ERDI Gergo  <cactus@cactus.rulez.org>

	* bonobo/bonobo-persist-stream.c: allow missong save/load
	implementations and raise NotSupported exceptions accordingly

	* bonobo/bonobo-persist-file.c: allow missing save/load
	implementations and raise NotSupported exceptions accordingly

	* idl/bonobo-persist.idl: Added NotSupported and IOError
	exceptions to the Persist interfaces

2000-12-23  Miguel de Icaza  <miguel@helixcode.com>

	* bonobo/bonobo-ui-util.c (bonobo_ui_util_get_ui_fname): Do not
	allow for the user file ui to exist.  
	(bonobo_ui_util_get_ui_fname): Do not use
	gnome_datadir_unconditional.  This is broken too.
	(Makefile.am): Define BONOBO_UIDIR to be $(datadir)/gnome/ui

2000-12-23  Dietmar Maurer  <dietmar@helixcode.com>

	* bonobo/bonobo-event-source.c 
	(bonobo_event_source_notify_listeners_full): new function

	* bonobo/bonobo-listener.h: added some new methods to handle event
	names.

	* bonobo/bonobo-listener.c: impl. the new methods.

	* bonobo/bonobo-property-bag.c (notify_listeners): use the new
	functions.

2000-12-22  Dietmar Maurer  <dietmar@helixcode.com>

	* bonobo/bonobo-exception.c (bonobo_exception_get_text): removed
	NoListening exception.

	* bonobo/bonobo-property-bag.c: removed PropertyListener stuff.

	* idl/bonobo-property.idl: removed the PropertyListener interface,
	removed add/remove ChangeListener methods from PropertyBag,
	removed noListening exception.
	
	* bonobo/bonobo-property-listener.[ch]: removed. We aggreate the
	property bag with an event source instead.

	* bonobo/bonobo-moniker-util.c (query_from_name): return the
	prefix including the colon.

	* samples/controls/sample-control-container.c: make it work with
	the new PropertyBag code. 

	* bonobo/bonobo-property-types.[ch]: removed

2000-12-22  Maciej Stachowiak  <mjs@eazel.com>

	* bonobo.spec.in: Removed ${prefix}/bin/std-moniker, added
	${prefix}/lib/bonobo/moiniker/*

2000-12-22  Dietmar Maurer  <dietmar@helixcode.com>

	* monikers/bonobo-moniker-std.c: merged the file, item, cache and new
	moniker and the file/stream extenders into one shared library.

	* monikers/Bonobo_Moniker_std.oafinfo.in: also merged the oafinfo
	files.

	* monikers/*: cleanup.
	
2000-12-21  Lutz Muller <urc8@rz.uni-karlsruhe.de>

	* storage-modules/bonobo-storage-vfs.c (vfs_open_stream): fix bug.
	(bonobo_storage_vfs_open): invert type check on directories.

2000-12-21  Dietmar Maurer  <dietmar@helixcode.com>

	* bonobo/bonobo-moniker-util.c (query_from_name): return the
	prefix including the colon.

2000-12-21  Michael Meeks  <michael@helixcode.com>

	* monikers/Makefile.am: Add bonobo-moniker-stream-extender again.

	* monikers/bonobo-moniker-extender-stream.c (main): correct to
	the right OAFIID.

2000-12-20  Michael Meeks  <michael@helixcode.com>

	* tests/test-container.c (do_add_canvas_cmd): re-size the canvas area.

	* samples/compound-doc/sample-canvas-item.c (last_unref_cb),
	(main): count objects, setup colormap & visual.
	(item_factory): upd.
	(make_hilbert, setup_item): copy from gnome-libs.

	* bonobo/bonobo-canvas-component.c: Some renaming.
	(impl_Bonobo_Canvas_Component_getUIComponent): impl.
	(gcc_destroy): impl.
	(bonobo_canvas_component_set_ui_component),
	(bonobo_canvas_component_get_ui_component): impl.

	* idl/bonobo-canvas.idl: add setUIContainer.

	* tests/test-container.c (application_new): fixup.

	* tests/Makefile.am (noinst_PROGRAMS): remove test-container-autoload;
	very stale indeed.

2000-12-20  Richard Hult  <rhult@hem.passagen.se>

	* bonobo/bonobo-running-context.c (bonobo_running_context_get_type): 
	fix to use the correct structure size.

2000-12-20  Michael Meeks  <michael@helixcode.com>

	* monikers/bonobo-moniker-extender-file.c (extender_destroy_cb): 
	kill. (file_extender_factory): upd.
	(file_extender_resolve): only check for PersistFile leave stream
	to the stream extender.

	* bonobo/bonobo-object.c (idle_unref_fn),
	(bonobo_object_idle_unref): impl.

2000-12-19  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-generic-factory.c (bonobo_generic_factory_init): 
	remove.
	(bonobo_generic_factory_get_type): upd.
	(create_bonobo_generic_factory): rename to
	(bonobo_generic_factory_corba_object_create): this & publicize.
	(bonobo_generic_factory_new_multi),
	(bonobo_generic_factory_new): upd.
	(bonobo_generic_factory_finalize): chain to finalize not destroy !

	* bonobo/bonobo-shlib-factory.[ch]: Create.

	* bonobo/Makefile.am: update.

2000-12-19  Dietmar Maurer  <dietmar@helixcode.com>

	* monikers/bonobo-moniker-cache.c (bonobo_cache_factory): count
	the running object.

	* monikers/Makefile.am: small bug fix

	* bonobo/bonobo-moniker.c (bonobo_moniker_set_name): allow the
	moniker name to be the same as the prefix.

	* idl/bonobo-listener.idl: addListener returns an Id.

	* bonobo/bonobo-event-source.c: see above.

2000-12-19  Michael Meeks  <michael@helixcode.com>

	* configure.in: Bump version to 0.31

	* monikers/bonobo-moniker-extender-file.c (extender_destroy_cb):
	don't use global variables housed in a just removed shared library!
	this needs splitting into the core...

	* monikers/moniker-test.c (main): remove erroneous double option
	processing.

	* monikers/bonobo-moniker-gunzip.c (gunzip_resolve): use the stream
	extender, don't hard code interface to resolve to; split code into
	(gunzip_resolve_stream): here.

	* monikers/*: Prune scads of code.

2000-12-19  Daniel Egger  <egger@suse.de>

	* components/application-x-gnomine/Makefile.am:
	Fix linking order.

2000-12-18  Maciej Stachowiak  <mjs@eazel.com>

	* monikers/Makefile.am: Removed no longer existent files from
	bonobo_moniker_std_SOURCES; added bonobo-moniker-std.h. This is to
	fix `make distcheck'.

2000-12-19  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-moniker-extender.c (bonobo_moniker_extender_init): remove.
	fully documented.
	(bonobo_moniker_extender_resolve): use the generic Moniker exceptions.

	* bonobo/bonobo-moniker-util.c (bonobo_moniker_util_unescape),
	(bonobo_moniker_util_escape): move to here.

	* tests/test-moniker.c (check_string): upd.

	* bonobo/bonobo-moniker.c (escape_moniker, unescape_moniker): move
	(bonobo_moniker_get_name_escaped, bonobo_moniker_set_name): upd.

	* bonobo/bonobo-moniker-util.c: s/usec/msec/
	fully documented.

2000-12-18  Michael Meeks  <michael@helixcode.com>

	* monikers/Makefile.am: Update seds to be more standard
	and work in odd build environments.
	
	* monikers/bonobo-moniker-oaf.c (oaf_resolve): use
	get_name_full.
	(bonobo_moniker_oaf_resolve): rename to this.

	* monikers/bonobo-moniker-*: Drasticaly prune, lots of tedious gtk+
	sub-classing code removed; killed loads of headers.

	* monikers/bonobo-moniker-std.h: prototype the resolve fns here.

	* bonobo/bonobo-moniker-simple.[ch]: Implement.

	* bonobo/Makefile.am: Add simple.

	* bonobo/bonobo-object-directory.c: sort out house of horrors
	of style, and implementation; dragon removal.

	* monikers/bonobo-moniker-file.c (file_resolve): use the file and stream
	extenders as fallbacks.

	* bonobo/bonobo-moniker.c (impl_resolve): add options.
	(bonobo_moniker_get_name_full): impl.

	* bonobo/bonobo-moniker-extender.c (impl_Bonobo_MonikerExtender_resolve): upd.
	(bonobo_moniker_use_extender): impl.

	* monikers/bonobo-moniker-extender-stream.c (stream_extender_resolve):
	create.

	* monikers/Bonobo_Moniker_Extender_stream.oafinfo: add.

	* monikers/Bonobo_Moniker_Extender_file.oafinfo: upd.

	* monikers/bonobo-moniker-extender-file.c (file_extender_resolve):
	unref the stream after resolving.

	* idl/bonobo-moniker.idl: Add ResolveOptions to 'resolve'.

2000-12-18  Dave Camp  <dave@helixcode.com>

	* monikers/Makefile.am (EXTRA_DIST): 
	Include Bonobo_Monker_Extender_file.oafinfo.in and 
	Bonobo_Moniker_cache.oafinfo.in.

2000-12-18  Dietmar Maurer  <dietmar@helixcode.com>

	* gshell/gshell.c (verb_HelpAbout_cb): changed the text of the
	about dialog (removed "for Linux")

	* monikers/bonobo-moniker-extender-file.c: make it a shlib moniker

	* monikers/Bonobo_Moniker_Extender_file.oafinfo.in: new file

	* monikers/Bonobo_Moniker_cache.oafinfo.in: new file

	* monikers/bonobo-moniker-cache.[ch]: new files

2000-12-17  Miguel de Icaza  <miguel@helixcode.com>

	* monikers/bonobo-moniker-oaf.c (bonobo_moniker_oaf_new): Remove
	the registered prefix, as the code checked in on friday is just
	broken. 

	* bonobo/bonobo-widget.c (bonobo_widget_new_control): Removed
	FIXME as it has been fixed.

	* bonobo/bonobo-moniker-util.c: Sync the name with the actual
	OAFIDD of the HTTP moniker.

	* monikers/Makefile.am (bin_PROGRAMS): Install moniker test.

2000-12-16  Dietmar Maurer  <dietmar@maurer-it.com>

	* bonobo/bonobo-moniker-util.c (get_full_interface_name): fixed a
	small bug.

Fri Dec 15 16:53:30 2000  George Lebl <jirka@5z.com>

	* bonobo/bonobo-arg.c, bonobo/bonobo-ui-component.c:  Swap order
	  of memset arguments to be correct

	* bonobo/bonobo-property-bag.[ch]:  Make constructor method public
	  to allow derivation.  Also use bonobo_object_unref instead of
	  g_free on failed object.

	* bonobo/bonobo-transient.[ch],
	  bonobo/bonobo-ui-toolbar-control-item.[ch], bonobo-widget.[ch]: 
	  Make constructor method public to allow derivation.

2000-12-16  Michael Meeks  <michael@helixcode.com>

	* monikers/bonobo-moniker-query.c (query_resolve): upd.

	* monikers/bonobo-moniker-new.c (new_parse_display_name): kill.
	(new_resolve): upd.
	(bonobo_moniker_new_class_init): upd.

	* monikers/bonobo-moniker-oaf.c (oaf_parse_display_name): kill.
	(bonobo_moniker_oaf_new): impl.

	* monikers/bonobo-moniker-http.c (bonobo_moniker_http_factory): simplify.
	(last_unref_cb): impl.
	remove running object stuff.
	(http_destroy_cb): kill.
	(bonobo_moniker_http_new): shrink.
	(bonobo_moniker_http_class_init): upd.
	(http_parse_display_name): kill.

	* monikers/bonobo-moniker-gunzip.c (bonobo_moniker_gunzip_new): upd.
	(gunzip_destroy_cb): kill.
	remove running objects stuff.
	(last_unref_cb): impl.
	(gunzip_parse_display_name): kill.
	(bonobo_moniker_gunzip_class_init): upd.

	* monikers/bonobo-moniker-item.c (item_parse_display_name): kill.
	(bonobo_moniker_item_new): impl.
	(item_resolve): upd.
	(bonobo_moniker_item_class_init): upd.

	* monikers/std-moniker.c (main, last_unref_cb): update to new
	running context scheme.
	(std_destroy_cb): kill old scheme.
	(bonobo_moniker_factory): update to new constructors.

	* monikers/bonobo-moniker-file.c (file_parse_display_name): kill.
	(file_resolve): prune.
	(bonobo_moniker_file_class_init): upd.

2000-12-15  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-moniker.c (impl_resolve): add auto exception
	set on CORBA_OBJECT_NIL, impl. extenders.
	(bonobo_moniker_construct): impl.
	(bonobo_moniker_default_parse_display_name): impl.
	(bonobo_moniker_get_name): simplify.
	(bonobo_moniker_get_name_escaped): simplify.

	* tests/test-moniker.c (check_string): upd.

	* bonobo/bonobo-activation-context.c (impl_Bonobo_ActivationContext_getExtender): 
	impl. (bonobo_activation_context_get_epv): hook up.

	* bonobo/bonobo-moniker-extender.c (bonobo_moniker_find_extender): 
	allow 1 MonikerExtender to extend many monikers.

2000-12-15  Dietmar Maurer <dietmar@maurer-it.com>

	* monikers/bonobo-moniker-file.c (file_resolve): impl.
	Bonobo/Storage, chain to extender.

	* monikers/Makefile.am: Add bits.

	* monikers/bonobo-moniker-extender-file.[ch]: impl.

	* monikers/Bonobo_Moniker_Extender_file.oafinfo: add.

	* bonobo/Makefile.am: add bits.

	* bonobo/bonobo-moniker-extender.[ch]: impl.

	* idl/bonobo-moniker.idl: add MonikerExtender interface.

2000-12-15  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-moniker.c (escape_moniker): fix precondition.

2000-12-14  Darin Adler  <darin@eazel.com>

	* bonobo.spec.in: Update for recent changes in names of some
	sample programs.

2000-12-14  Michael Meeks  <michael@helixcode.com>

	* tests/Makefile.am: add test-moniker

	* tests/test-moniker.c: create.

	* bonobo/bonobo-moniker.c (escape_moniker): impl.
	(bonobo_moniker_get_name_escaped): use it.
	(unescape_moniker): impl.
	(bonobo_moniker_set_name): impl.

	* bonobo/bonobo-generic-factory.h: s/goad_id/oaf_iid/

	* bonobo/bonobo-selector.c (bonobo_selector_construct): set 'Ok' as
	default on selector.

	* bonobo/bonobo-running-context.c (get_running_info): add create param
	update all calls.

	* bonobo/bonobo-generic-factory.c (bonobo_generic_factory_new):
	ignore factories on the running context.

	* components/selector/bonobo-selector.c (last_unref_cb): impl.
	(main): connect to running context.

	* bonobo/bonobo-running-context.c (bonobo_running_context_new): 
	aggregate an event source with the interface.
	(bonobo_context_running_get): impl.
	(check_empty): notify listener.

	* bonobo/bonobo-event-source.c (bonobo_event_source_ignore_listeners): impl.
	(impl_Bonobo_EventSource_addListenerWithMask): add ignore.

	* bonobo/bonobo-moniker-util.c (get_full_interface_name): impl: maps
	Bonobo/Control         -> IDL:Bonobo/Control:1.0,
	Bonobo/Control:3.5     -> IDL:Bonobo/Control:3.5
	IDL:Bonobo/Control     -> IDL:Bonobo/Control:1.0
	IDL:Bonobo/Control:1.0 -> IDL:Bonobo/Control:1.0
	(bonobo_get_object_async): use it.
	(bonobo_moniker_client_resolve_default): use it too.
	(bonobo_moniker_util_seek_std_separator): impl. escaping support.

	* samples/controls/bonobo-calculator-control.c: update
	
	* samples/controls/bonobo-clock-control.c: update

	* samples/controls/sample-control-factory.c: re-write.

	* samples/controls/Bonobo_Sample_Controls.oafinfo: create.

	* samples/controls/Bonobo_Sample_Calculator.oafinfo: remove.

	* samples/controls/Bonobo_Sample_Clock.oafinfo: remove.

	* samples/compound-doc/Makefile.am: Rename samples.

	* samples/compound-doc/Bonobo_Sample_CanvasItem.oafinfo: upd.

	* samples/compound-doc/Bonobo_Sample_Paint.oafinfo: ditto.

2000-12-14  Michael Meeks  <michael@helixcode.com>

	* components/selector/bonobo-selector.c (generic_factory): deal
	with running object issues in the old way for now.
	(get_prop, set_prop, generic_factory): add properties to make it
	actualy useful.

2000-12-14  Michael Meeks  <michael@helixcode.com>

	* Version 0.30

2000-12-14  Michael Meeks  <michael@helixcode.com>

	* configure.in (orbit_version): downgrade dependency to
	ORBit-0.5.5, NB. try marshaling a CORBA_any containing an Object
	reference with this version.

2000-12-13  Federico Mena Quintero  <federico@helixcode.com>

	* bonobo/bonobo-transient.c (bonobo_transient_construct): Disable
	policy destruction code until ORBit is released, sigh.  THIS WILL
	LEAK.  THIS WILL LEAK.  THE ROOF IS ON FIRE.  WE ARE SORRY ABOUT
	OUR APPEARANCE.

2000-12-13  Dietmar Maurer <dietmar@maurer-it.com>

	* bonobo/bonobo-property-bag-xml.c 
	(bonobo_property_bag_xml_encode_any): argument is const 

	* bonobo/*.c: use BONOBO_EX ()
	
	* bonobo/bonobo-property-bag.c: removed the poa member from
	_BonoboPropertyBagPrivate (replaced by transient)

2000-12-13  Michael Meeks  <michael@helixcode.com>

	* Version 0.29
	
2000-12-13  Michael Meeks  <michael@helixcode.com>

	* configure.in (orbit_version): Depend on the as yet unreleased
	ORBit-0.5.6: badger Elliot about this.
	Totaly expunge the libuuid checks and BonoboBrowser stuff.

2000-12-12  Michael Meeks  <michael@helixcode.com>

	* components/selector/bonobo-selector.c (generic_factory): 
	create and init a selector-widget.

	* bonobo/bonobo-selector.c (bonobo_selector_destroy): upd.

	* bonobo/bonobo-selector.h (BONOBO_IS_SELECTOR): rename macro.

	* bonobo/Makefile.am: add bonobo-selector-widget.[ch]

	* bonobo/bonobo-selector-widget.[ch]: split from bonobo-selector.

	* bonobo/bonobo-running-context.c
	(bonobo_running_context_class_init): add signals.
	(bonobo_running_context_ignore_object): impl.

2000-12-12  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-running-context.c (check_empty): kill fatal bug.

	* components/selector/*: impl. a component selector control.
	
	* components/Makefile.am: add selector

	* configure.in: add selector.

2000-12-12  Michael Meeks  <michael@helixcode.com>

	* idl/Makefile.am: Sort IDL.

	* bonobo/Makefile.am (idls): sort and add missing IDL.

2000-12-12  Dietmar Maurer <dietmar@maurer-it.com>

	* bonobo/bonobo-property-bag.[ch]: use BonoboTransient.

	* bonobo/bonobo-property.[ch]: modified to work with BonoboTransient.

2000-12-12  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-bind-context.[ch]: clean out cruft.

	* bonobo-component-directory.[ch]: ditto.
	
	* bonobo/bonobo-object.c (bonobo_object_finalize_real):
	remove object from running context.
	(bonobo_object_activate_servant): add object to context.

	* bonobo/bonobo-context.c (bonobo_context_init):
	add the 'Running' context.
	(context_add): split from (bonobo_context_init): here.

	* bonobo/Makefile.am: don't install internal context stuff,
	should be used via. the CORBA interface anyway by everyone.
	add bonobo-running-context stuff.

	* bonobo/bonobo-running-context.[ch]: impl.

	* idl/bonobo-context.idl: flesh out running context.

2000-12-12  Michael Meeks  <michael@helixcode.com>

	* tests/test-any.c (main): add gtk_type_init.

2000-12-11  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-moniker-util.c (get_async1_cb): impl.
	(get_object_async_ctx_free): impl.
	(bonobo_get_object_async): impl.
	(get_async2_cb): impl.

2000-12-11  Darin Adler  <darin@eazel.com>

	* bonobo/bonobo-ui-toolbar.c: (impl_destroy):
	Fixed loop that destroys the unparented widgets. It was looking at
	p->next after code that might have destroyed p.

2000-12-11  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-ui-xml.c (override_node_with): revert
	Darin's last change to this - feature not bug :-)

2000-12-11  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-moniker-util.c (resolve_async_cb): 
	release unref the moniker.
	(bonobo_moniker_resolve_async): take a ref here.
	(bonobo_get_object_async): stub.

2000-12-11  Iain Holmes  <iain@helixcode.com>

	* bonobo/bonobo-property-control.[ch]: Added 
	bonobo_property_control_new_full to use an already created 
	BonoboEventSource. Added a function to retrieve this event source.
	Namespaced the property_changed event name.

2000-12-11  Michael Meeks  <michael@helixcode.com>

	* doc/NAMESPACE: add ref to FAQ.

	* doc/FAQ: add namespacing recommendations

	* OChangelog-2000-12-11: rotated ChangeLog
