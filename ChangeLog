2001-10-18  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-moniker-util.c (async_parse_cb): fix
	the callback; setName has no return value !

2001-10-17  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-persist-stream.c (impl_save),
	(impl_load): update sigs to kill warnings.

	* bonobo/bonobo-types.c
	(bonobo_value_get_corba_exception): return as const,
	you can't copy CORBA_Environments in a nice way.

	* bonobo/bonobo-moniker-util.c
	(bonobo_moniker_util_qi_return): fix theoretical
	uninit retval bug. and don't redundantly duplicate the
	returned CORBA_Object.

	* bonobo/bonobo-exception.c
	(bonobo_exception_general_error_set): impl.

	* tests/test-object.c (main): regression test it.

	* bonobo/bonobo-event-source.c
	(bonobo_event_source_client_add_listener_full): release
	the CORBA ref on the event source not just the bonobo one.

2001-10-13  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-moniker-util.c: kill all the ENABLE_ORBIT2 bits.

	* bonobo/bonobo-moniker-util.h: don't include bonobo-async.h

	* bonobo/Makefile.am (libbonobo_src): remove bonobo-async.[ch],
	dead - see ORBit2/src/orb/orb-core/orbit-small *Async*

2001-09-29  Iain Holmes  <iain@ximian.com>

	* bonobo/bonobo-listener.c (bonobo_listener_new): Check if the callback
	function is NULL, and if so, don't create a GClosure.

2001-10-05  Abel Cheung  <maddog@linux.org.hk>

	* monikers/Bonobo_Moniker_std.server.in.in: Havoc's patch
	  to rename libmoniker_std.so -> libmoniker_std_2.so,
	  avoiding conflict with bonobo 1.0.x .
	* monikers/Makefile.am: Ditto.

2001-09-27  Michael Meeks  <michael@ximian.com>

	* Version 1.103

2001-09-25  Mark McLoughlin  <mark@skynet.ie>

	* samples/echo/Makefile.am: s/orbit-idl/$(ORBIT_IDL).

2001-09-25  Michael Meeks  <michael@ximian.com>

	* tests/Makefile.am: hook test-properties up to run
	automaticaly.

	* tests/test-properties.sh: impl.

	* tests/test-properties-client.c (main): read IOR
	from 'iorfile'.

	* tests/test-properties-server.c (create_bag): dump
	the IOR into 'iorfile'

2001-09-24  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-property-bag-client.c (MAKE_SET_SIMPLE):
	use arg_new_from so we copy and don't start freeing memory
	we don't own later - sigh.

	* tests/test-event-source.c: fix signatures & (void)

	* bonobo/bonobo-types.c (bonobo_closure_invoke_va_list): 
	change sig. and split out return value handling.
	(bonobo_closure_invoke): move return value handling here
	where we can va_start again.

2001-09-22  Wang Jian  <lark@linux.net.cn>

	* configure.in(ALL_LINGUAS): Added zh_CN for Simplified Chinese.

2001-09-21  Havoc Pennington  <hp@redhat.com>

	* configure.in, autogen.sh: remove CERTIFIED_GNOMIE

2001-09-20  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-moniker-util.c
	(bonobo_moniker_util_unescape): fix bug escaping literal
	'\\' mis-counting as 2 escapes, where there is only a
	single escaped '\'

2001-09-20  Frank Belew  <frb@ximian.com>

	* configure.in: Removed AM_CONDITIONAL(FALSE...)

2001-09-20  Pablo Saratxaga  <pablo@mandrakesoft.com>

	* configure.in: Added Catalan (ca) language

2001-09-17  Havoc Pennington  <hp@redhat.com>

	* bonobo/bonobo-types.c (bonobo_closure_invoke_va_list): patch
	from Ariel Rios to fix on Alpha, PPC

	* bonobo/libbonobo-2.0.pc.in (idldir): update

	* idl/Makefile.am (idldir): change to datadir/idl/bonobo-2.0

2001-09-10  Alex Larsson <alexl@redhat.com>

	* bonobo/bonobo-types.c (bonobo_corba_any_get_type),
	(bonobo_corba_typecode_get_type),
	(bonobo_corba_exception_get_type): fix for recent glib
	breakage - you need HEAD glib.

2001-09-10  Frank Belew  <frb@ximian.com>

	* bonobo/bonobo-moniker.c 
	(impl_set_name): don't return in a void function

2001-09-10  Dan Winship  <danw@ximian.com>

	* bonobo/bonobo-event-source.c (bonobo_event_source_init): Use
	g_new0 to initialize event_source->priv to prevent uninitialized
	reads.

2001-09-10  Martin Baulig  <martin@gnome.org>

	* Version 1.102.0.

	* configure.in: Ooops, bump version number to 1.102.0.

2001-09-10  Martin Baulig  <martin@gnome.org>

	* configure.in: Require ORBit-2.0 >= 2.3.94 and glib-2.0 >= 1.3.7.

2001-09-10  Martin Baulig  <martin@gnome.org>

	* Bonobo/bonobo-types.c
	(bonobo_corba_any_get_type): Don't provide a `boxed_init' function.
	(bonobo_corba_exception_get_type): Likewise.
	(corba_any_init, corba_exception_init): Removed.

2001-09-10  Martin Baulig  <martin@gnome.org>

	* tests/test-moniker.c: The expected result of "a:!b:" is "!b:",
	not "b:" - see my ChangeLog entry for bonobo/bonobo-moniker-util.c
	(bonobo_moniker_util_parse_name) from 2001-08-11.
	
2001-09-09  Frank Belew <frb@ximian.com>

	* bonobo/bonobo-types.c: removed references to gbsearcharray
	  (otaylor@redhat.com)

2001-09-03  Jody Goldberg <jgoldberg@home.com>

	* bonobo/bonobo-stream-memory.c (mem_get_info) : CORBA does not like
	  NULL as a CORBA_String

2001-09-06  Mark McLoughlin  <mark@skynet.ie>

	* Makefile.am: change includedir to gnome-2.0/ as well.

2001-09-06  Anders Carlsson  <andersca@gnu.org>

	* bonobo/Makefile.am: Change includedir to gnome-2.0/ 
	instead of gnome/2/

	* bonobo/libbonobo-2.0.pc.in (Cflags): Likewise.

2001-09-04  Martin Baulig  <martin@gnome.org>

	This big closures / types patch:

	- GValues are not copied anymore in signal/closure marshallers
	(using G_SIGNAL_TYPE_STATIC_SCOPE / G_VALUE_NOCOPY_CONTENTS).

	- we use "real" types (not G_TYPE_POINTER) in all signal/closure
	marshallers.

	- some closures now have custom marshallers to make them easier
	to use for scripting languages.

	- bonobo_closure_invoke() no longer returns a GValue, it now takes
	the return type as first type argument, see the documentation in
	bonobo-types.c for details.

	Detailed list of changes:

	* bonobo/bonobo-types.h (BONOBO_TYPE_STRING,
	BONOBO_TYPE_CORBA_ANY, BONOBO_TYPE_CORBA_OBJECT,
        BONOBO_TYPE_CORBA_TYPECODE, BONOBO_TYPE_CORBA_EXCEPTION):
	Set the G_SIGNAL_TYPE_STATIC_SCOPE flag for all these types.
	(BONOBO_TYPE_STRING): New type.
	(BONOBO_TYPE_NONSTATIC_UNKNOWN, BONOBO_TYPE_NONSTATIC_CORBA_ANY,
        BONOBO_TYPE_NONSTATIC_CORBA_OBJECT, BONOBO_TYPE_NONSTATIC_CORBA_TYPECODE,
	BONOBO_TYPE_NONSTATIC_CORBA_EXCEPTION): Added #defines for the
	non-static versions of these types.

	* bonobo/bonobo-types.c (bonobo_value_set_unknown,
        bonobo_value_set_corba_any, bonobo_value_set_corba_typecode,
	bonobo_value_set_corba_environment): New functions; they do not
	copy their arguments and set the G_VALUE_NOCOPY_CONTENTS flag.
	(bonobo_closure_invoke_valist): Removed the `GValue *retval'
	argument, renamed `first_type' to `return_type'. The return value
	is now handled like a normal argument. For details, see the
	documentation in the source file.
	(bonobo_closure_invoke): Removed the `GValue *retval' argument,
	renamed `first_type' to `return_type'

	* bonobo/bonobo-generic-factory.c: Marshal the closure as
	OBJECT:STRING, not as POINTER:STRING.

	* bonobo/bonobo-item-container.c: Marshal the "get_object" signal
	as BOXED:STRING_BOOLEAN_BOXED (retval as BONOBO_TYPE_UNKNOWN, args
	are BONOBO_TYPE_STRING, G_TYPE_BOOLEAN, BONOBO_TYPE_CORBA_EXCEPTION);

	* bonobo/bonobo-item-handler.c: Provide custom marshallers for the
	`enum_objects' and `get_object' closures:
	- `enum_objects' returns a G_TYPE_POINTER and takes a
	BONOBO_ITEM_HANDLER_TYPE and a BONOBO_TYPE_CORBA_EXCEPTION.
	- `get_object' returns a BONOBO_TYPE_UNKNOWN and takes
	BONOBO_ITEM_HANDLER_TYPE, G_TYPE_STRING, G_TYPE_BOOLEAN and
	BONOBO_TYPE_CORBA_EXCEPTION arguments.

	* bonobo/bonobo-listener.c: Marshal the `event_callback' as
	VOID:STRING,BOXED,BOXED (BONOBO_TYPE_STRING, BONOBO_TYPE_CORBA_ANY,
	and BONOBO_TYPE_CORBA_EXCEPTION).

	* bonobo/bonobo-marshal.list: Removed all unused items and everything
	from libbonoboui.

	* bonobo/bonobo-moniker-simple.h (BONOBO_RESOLVE_FLAG_TYPE):
	New type; this is a GFlags type for Bonobo_ResolveFlag.
	(bonobo_resolve_flag_get_type): Added type init func for it.

	* bonobo/bonobo-moniker-simple.c: Provide a custom marshaller for
	the `resolve_fn' closure. Instead passing a Bonobo_ResolveOptions as
	G_TYPE_POINTER, the closure now takes its contents as two arguments:
	BONOBO_RESOLVE_FLAG_TYPE and G_TYPE_LONG.
	The closure returns a BONOBO_TYPE_CORBA_OBJECT and takes
	BONOBO_MONIKER_TYPE, BONOBO_RESOLVE_FLAG_TYPE, G_TYPE_LONG,
	BONOBO_TYPE_STRING, BONOBO_TYPE_CORBA_EXCEPTION as arguments.

	* bonobo/bonobo-object.c: Marshal the "system_exception" signal
	VOID:OBJECT,BOXED (BONOBO_OBJECT_TYPE | G_SIGNAL_TYPE_STATIC_SCOPE
	and BONOBO_TYPE_CORBA_EXCEPTION).

	* bonobo/bonobo-property-bag.c: Provide custom marshallers for the
	'get_prop' and `set_prop' closures:
	`get_prop' returns BONOBO_TYPE_CORBA_ANY and takes
	BONOBO_PROPERTY_BAG_TYPE,BONOBO_TYPE_CORBA_TYPECODE,
	G_TYPE_UINT, BONOBO_TYPE_CORBA_EXCEPTION.
	`set_prop' returns nothing and takes
	BONOBO_PROPERTY_BAG_TYPE, BONOBO_TYPE_CORBA_ANY, G_TYPE_UINT,
	BONOBO_TYPE_CORBA_EXCEPTION.

2001-08-31  Abel Cheung  <maddog@linux.org.hk>

	* configure.in (ALL_LINGUAS): zh_TW.Big5 -> zh_TW

2001-08-27  ERDI Gergo  <cactus@cactus.rulez.org>

	* bonobo/bonobo-object.c (bonobo_object_set_immortal): s/imortal/immortal/

2001-08-22  Rodrigo Moya <rodrigo@gnome-db.org>

	* bonobo/bonobo-arg.c (bonobo_arg_new_from): new function to create
	BonoboArg's from a given type and data

	* bonobo/bonobo-arg.h: added GET/SET macros for more CORBA types

2001-08-21 Dirk-Jan C. Binnema <djcb@djcbsoftware.nl>
	
	* bonobo/bonobo-main.c (bonobo_init_full): remove SIGPIPE handler;
	handle this in linc instead

	* bonobo/bonobo-moniker.c (all char* methods): return NULL instead
	of "" in case of failure, for consistency

2001-08-20  Maciej Stachowiak  <mjs@noisehavoc.org>

	* idl/Makefile.am: Fix violation of bonobo-activation's include
	guards to match new names.

2001-08-20  ERDI Gergo  <cactus@cactus.rulez.org>

	* idl/Bonobo_Clipboard.idl: more sensible argument order

2001-08-18  Michael Meeks  <michael@ximian.com>

	* idl/Makefile.am: build the Activation_types into our
	type library.

2001-08-18  Darin Adler  <darin@bentspoon.com>

	* bonobo/Makefile.am:
	* idl/Makefile.am:
	* monikers/Makefile.am:
	* tests/Makefile.am:
	Fix loose ends from last checkin and remove unnecessary -I
	directives to speed up compiles.

2001-08-18  Darin Adler  <darin@bentspoon.com>

	* configure.in: Add GLIB_GENMARSHAL variable.
	* bonobo/Makefile.am: Update marshal build rules to work in a
	simpler way.
	* idl/Makefile.am: Fix generated-source-file rules so they
	work well enough for "make distcheck".

2001-08-17  Michael Meeks  <michael@ximian.com>

	* monikers/bonobo-moniker-new.c
	(bonobo_moniker_new_resolve): kill warning on 'params'.

2001-08-17  Mikael Hallendal  <micke@codefactory.se>

	* bonobo/bonobo-property-bag.c 
	(impl_Bonobo_PropertyBag_setValue): Use PROPERTY_NO_AUTONOTIFY to
	check if we should notify listeners.
	(impl_Bonobo_PropertyBag_setValues): same.

	* idl/Bonobo_Property.idl: added PROPERTY_NO_AUTONOTIFY.

2001-08-17  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-event-source.c
	(bonobo_event_source_notify_listeners): hold a CORBA
	reference over the notification re-enterancy hazard.
	Homogenise opt_ev handling, to keep 'ev' consistant always.

2001-08-17  ERDI Gergo  <cactus@cactus.rulez.org>

	* bonobo/bonobo-event-source.c
	(bonobo_event_source_notify_listeners): Allow CORBA_OBJECT_NIL for
	the `value' argument

2001-08-16  Fatih Demir <kabalak@gtranslator.org>

	* configure.in: Added "tr" to the languages list.

2001-08-14  Michael Meeks  <michael@ximian.com>

	* monikers/bonobo-moniker-ior.c
	(bonobo_moniker_ior_resolve): impl - sweet.

	* monikers/Makefile.am: upd.

	* bonobo/bonobo-moniker-util.c
	(bonobo_moniker_util_qi_return): comment - looks like we
	have a redudant CORBA_Object_duplicate to me.

2001-08-14  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-property-bag-client.c
	(bonobo_pbclient_get_value): remove redundant cleanout: label

	* monikers/Makefile.am: s/oaf/server, update install dir.

	* bonobo/bonobo-property-bag.c (bonobo_property_bag_add_full):
	fix secondary 'add_full' closure store to use new marshaller.

2001-08-13  Michael Meeks  <michael@ximian.com>

	* idl/Makefile.am (Bonobo-imodule.c): fix itype lib build deps.

	* configure.in: bump to 1.101.2

	* tests/test-object.c: kill some warnings.

	* idl/Bonobo_UI.idl: add 'execVerb', 'uiEvent' for
	scripting bindings & macros.

	* bonobo/bonobo-exception.c (bonobo_exception_repoid_to_text):
	update to reflect new exceptions.

2001-08-11  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-property-bag-client.c
	(bonobo_pbclient_get_value): re-write to tolerate nulls
	silently and map tk_null -> NULL.

	* tests/test-object.c (main): add BONOBO_RET_EX regression
	tests.

	* bonobo/bonobo-exception.c
	(bonobo_exception_repoid_to_text): filled out the
	PropertyBag exceptions.

2001-08-11  Martin Baulig  <martin@gnome.org>

	* bonobo/bonobo-exception.h (BONOBO_RET_EX, BONOBO_RET_VAL_EX):
	Make the G_STMT_START/END actually work.

	* bonobo/bonobo-moniker-util.c (bonobo_moniker_util_parse_name):
	For the item moniker, the "!" is the first character or the
	return value.

2001-08-10  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-arg.h: bracket protect arg in GET/SET macros.

2001-08-09 Dirk-Jan C. Binnema <djcb@djcbsoftware.nl>

	* bonobo/bonobo-moniker.c (bonobo_moniker_get_name_escaped):
	return NULL in case of failure.

2001-08-08  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-types.c (bonobo_closure_store),
	(bonobo_closure_invoke): tolerate a NULL closure - as
	a noop.

	* bonobo/bonobo-generic-factory.h: do a UI init if we
	have LIBBONOBOUI_H defined.

2001-08-08  Michael Meeks  <michael@ximian.com>

	* configure.in: add samples/echo

	* message-of-doom: ameliorate.

2001-08-08  Darin Adler  <darin@bentspoon.com>

	* bonobo/Makefile.am: One more tweak to the dependency
	fix. We still need to include bonobo-marshal.c.

2001-08-08  Michael Meeks  <michael@ximian.com>

	* idl/Makefile.am: move typelib stuff here, add whacked out
	defines to get bonobo-activation code included in-line.

	* bonobo/Makefile.am: kill typelib building.

2001-08-08  Michael Meeks  <michael@ximian.com>

	* bonobo/Makefile.am: make dependency fix more portable
	with Peter Wainwright's solution.

2001-08-08  Martin Baulig  <martin@gnome.org>

	* bonobo/bonobo-moniker-util.c (bonobo_moniker_util_parse_name):
	Return "!" for the item moniker.

	* bonobo/bonobo-item-handler.c (impl_enum_objects): Fixed closure.
	(impl_get_objects): Ditto.

2001-08-08  Martin Baulig  <martin@gnome.org>

	* bonobo/bonobo-types.h (bonobo_value_get_*): Constify the arg.
	(BONOBO_TYPE_CORBA_TYPECODE): New type.

	* bonobo/bonobo-property-bag.c
	(bonobo_marshal_ANY__TYPECODE_UINT_POINTER): New static function.
	This is a custom marshaller for the Bonobo::PropertyBag's `get_prop'
	method - it takes a CORBA_TypeCode instead of the CORBA_any and
	returns a CORBA_any.
	(impl_Bonobo_PropertyBag_getValue): The closure now takes a
	CORBA_TypeCode and returns a CORBA_any.

2001-08-08  Cody Russell  <bratsche@gnome.org>

	* bonobo/*.[h]: Ensured that all _get_type () functions are
	declared as G_GNUC_CONST.

2001-08-07  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-listener.c (impl_Bonobo_Listener_event):
	0 terminate the list of arguments - argh.

	* bonobo/bonobo-property-bag.c
	(impl_Bonobo_PropertyBag_getValue),
	(impl_Bonobo_PropertyBag_getValues),
	(impl_Bonobo_PropertyBag_setValue),
	(impl_Bonobo_PropertyBag_setValues): ditto.

	* bonobo/bonobo-item-handler.c (impl_enum_objects),
	(impl_get_object): ditto.

2001-08-07  Michael Meeks  <michael@ximian.com>

	* Version 1.101.1

2001-08-07  Michael Meeks  <michael@ximian.com>
	
	* configure.in: depend on ORBit2 >= 2.3.93 for
	CORBA_TypeCode_equivalent

	* bonobo/bonobo-property-bag-client.c
	(bonobo_pbclient_get_value): use CORBA_TypeCode_equivalent so
	we ignore tedious alias problems.

	* bonobo/bonobo-property-bag.c (bonobo_property_bag_remove):
	impl - breaks API freeze, but c'est la vie - important
	method to have around.

	* bonobo/Makefile.am: really fixup dependencies, build
	the other things afterwards.

2001-08-07  Rodrigo Moya <rodrigo@ximian.com>

	* bonobo/Makefile.am: build $CORBA_SOURCES and $marshal_sources before
	the other source files

2001-08-07  Mark McLoughlin <mark@skynet.ie>

	* bonobo/bonobo-event-source.c,
	  bonobo/bonobo-main.c,
	  bonobo/bonobo-object.c: 
	Use CORBA_OBJECT_NIL instead of CORBA_Object_is_nil.

        * bonobo/bonobo-object.c
	(bonobo_object_finalize_servant): use bonobo_object to 
	get the BonoboObject from the servant.
	(bonobo_object_dup_ref): move NIL check up.
	(bonobo_object_query_local_interface): check for exception
	from CORBA_Object_is_a and treat an exception as a FALSE
	return.

2001-08-05  Michael Meeks  <michael@ximian.com>

	* Makefile.am: distribute changes.txt

2001-08-03  Michael Meeks  <michael@ximian.com>

	* Version 1.101.0

	* configure.in: use AM_GLIB_GNU_GETTEXT.

	* Makefile.am: prune intl.

2001-08-02  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-types.c (bonobo_closure_store): make this
	include the marshalers.

	* bonobo/bonobo-marshal-main.c: remove.

	* bonobo/Makefile.am: update the strange dependency rules.

2001-08-03  Abel Cheung  <maddog@linux.org.hk>

	* configure.in: Added zh_TW.Big5 (traditional Chinese) to ALL_LINGUAS.

2001-08-01  Michael Meeks  <michael@ximian.com>

	* Version 1.100.0

2001-08-01  Maciej Stachowiak  <mjs@noisehavoc.org>

	* bonobo/bonobo-generic-factory.c:
	(impl_Bonobo_ObjectFactory_createObject): Don't pass params argument.
	(bonobo_generic_factory_class_init): Remove `manufactures'
	* monikers/bonobo-moniker-new.c: (bonobo_moniker_new_resolve):
	Don't pass params argument.

2001-08-02  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-types.c (bonobo_value_get_unknown): fixup.

2001-08-01  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-types.c (bonobo_value_get_unknown): ref.
	(bonobo_value_get_corba_object): ref the thing
	(bonobo_value_get_corba_any): copy more inefficiency.
	(bonobo_value_get_corba_exception): knobble - just too broken.

2001-08-01  Michael Meeks  <michael@ximian.com>

	* monikers/bonobo-moniker-oaf.c: upd.

	* monikers/bonobo-moniker-query.c: upd.

	* idl/Bonobo.idl: upd.

	* bonobo/bonobo-generic-factory.c: become a BonoboObject; horay.

	* bonobo/bonobo-shlib-factory.h: ditto.

	* configure.in: use bonobo-activation.

2001-08-01  Martin Baulig  <martin@gnome.org>

	* bonobo/bonobo-moniker-util.c (bonobo_moniker_util_qi_return): Only
	throw an exception if the object is nil, but don't emit a g_warning().

2001-08-01  Michael Meeks  <michael@ximian.com>

	* tests/test-moniker.c (test_real_monikers): add a test from Martin
	(main): use it.

2001-08-01  Martin Baulig  <martin@gnome.org>

	* bonobo/bonobo-generic-factory.c (bonobo_generic_factory_construct):
	Use bonobo_marshal_POINTER__STRING, not g_cclosure_marshal_VOID__STRING
	as closure marshaller.
	(bonobo_generic_factory_new_generic): Use G_TYPE_POINTER as return value
	for the closure.

	* bonobo/bonobo-marshal.list: Changed BOXED:POINTER,STRING,POINTER to
	BOXED:POINTER,STRING,BOXED and added OBJECT:STRING.

	* bonobo/bonobo-moniker-simple.c (simple_moniker): Initialize the static
	GValue before calling g_value_init() on it or you'll get a core dump.

	* bonobo/bonobo-moniker-simple.c (bonobo_moniker_simple_construct): Use
	bonobo_marshal_BOXED__POINTER_STRING_BOXED, not
	bonobo_marshal_BOXED__POINTER_STRING_POINTER.

2001-08-01  Martin Baulig  <martin@gnome.org>

	* bonobo/bonobo-types.c (bonobo_corba_exception_get_type): We need to use
	a custom boxed type for BONOBO_TYPE_CORBA_ENVIRONMENT since it's not a
	CORBA::Object.

2001-08-01  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-main.h: fix broken include guards.

2001-07-31  Abel Cheung  <maddog@linux.org.hk>

	* configure.in: Added zh_TW.Big5 (traditional Chinese) to ALL_LINGUAS.

2001-07-31  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-object.h: include liboaf here.

	* libbonobo.h: not here.

	* bonobo/bonobo-moniker-extender.c,
	* monikers/bonobo-moniker-query.c,
	* monikers/bonobo-moniker-oaf.c,
	* monikers/bonobo-moniker-new.c, 
	* monikers/bonobo-moniker-extender-stream.c,
	* bonobo/bonobo-shlib-factory.c,
	* bonobo/bonobo-generic-factory.c,
	* bonobo/bonobo-exception.c,
	* bonobo/bonobo-moniker-util.c: prune liboaf.h includes.

2001-07-31  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-context.c (bonobo_context_init): register
	as the "Moniker" context instead.

	* idl/Bonobo_Context.idl: rename Activation -> Moniker context.

	* bonobo/bonobo-activation-context.[ch]: rename to

	* bonobo/bonobo-moniker-context.[ch]: this.

	* bonobo/Makefile.am: upd.

2001-07-30  ERDI Gergo  <cactus@cactus.rulez.org>

	* bonobo/Makefile.am (libbonoboinclude_HEADERS): removed duplicate
	bonobo-marshal.h entry

	* bonobo/bonobo-property-bag.h: Made some BonoboProperty fields
	public again

	* tests/test-properties-server.c: updated

	* configure.in: Bumped version number because of new GClosure APIs

	* bonobo/bonoob-item-handler.c: finalization fixes
	
	* bonobo/bonobo-marshal-main.c: Include <gobject/gboxed.h> to
	avoid compile-time warnings

	* bonobo/bonobo-moniker-simple.h: cleanup, privatization
	Maybe next time someone creates a new Bonobo object they can make
	it privatized form the beginning... grr...
	
	* bonobo/bonobo-shlib-factory.h: cleanup 

	* bonobo/bonobo-generic-factory.h: cleanup

	* bonobo/bonobo-property-bag.c: Completely privatized BonoboPoperty
	plus GClosure-ization
	
	* bonobo/bonobo-marshal.list: Added new signature for PropertyBag,
	MonikerSimple and ItemHandler callbacks
	
        * bonobo/bonobo-item-handler.c: Privatization, GClosure-ization

2001-07-30  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-exception.c (bonobo_exception_get_text):
	re-instate nice oaf exception reporting, should be a hashed handler
	though.

	* bonobo/bonobo-types.c
	(bonobo_value_get_corba_exception, bonobo_value_get_corba_object),
	(bonobo_value_get_corba_any, bonobo_value_get_unknown): impl.

	* bonobo/bonobo-moniker-simple.c (bonobo_moniker_simple_new): upd.
	(bonobo_moniker_simple_new_gc): impl.
	(bonobo_moniker_simple_construct): upd.
	(simple_finalize): impl.
	(bonobo_moniker_simple_class_init): hook up.
	(simple_resolve): upd - use invoke.

2001-07-30  Dietmar Maurer  <dietmar@ximian.com>

	* tests/test-moniker.c (check_parse_name): impl.
	(main): added more tests.

	* monikers/bonobo-moniker-query.c: this is now a simple moniker,
	since we have fixed moniker separators # and ! (no customisation
	possible) 

	* idl/Bonobo_Moniker.idl: renamed getDisplayName to getName,
	renamed parseDisplayName to setName, added getParent/setParent
	instead of a parent attribute.

	* bonobo/bonobo-moniker-util.c (bonobo_moniker_util_parse_name): impl.
	(bonobo_moniker_util_get_parent_name): ev is now optional
	(bonobo_moniker_client_new_from_name): implemented right to left
	moniker name parsing. This ensures the correct loading of shlib
	style monikers.
	(bonobo_moniker_client_get_name): ev is now optional
	(bonobo_moniker_client_resolve_default):  ev is now optional
	(bonobo_get_object): ev is now optional
	(bonobo_url_register): added check for ev != NULL
	(bonobo_url_unregister):  added check for ev != NULL
	(bonobo_url_lookup): added check for ev != NULL

	* bonobo/bonobo-moniker.c (bonobo_moniker_set_parent): ev is now
	optional 
	(bonobo_moniker_get_parent): ev is now optional 
	(bonobo_moniker_default_set_name): impl.

	* bonobo_moniker_util_new_from_name_full: removed, use
	bonobo_moniker_client_new_from_name instead.

	* bonobo/bonobo-activation-context.c
	(impl_Bonobo_ActivationContext_createFromName): removed
	createWithParent 

	* idl/Bonobo_Context.idl: removed createWithParent

2001-07-30  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-types.c (bonobo_closure_invoke_va_list):
	reset the Value's type to 0.

	* bonobo/bonobo-marshal.list: add STRING,ENUM,STRING.

	* bonobo/bonobo-event-source.c (create_listener_id): kill.
	(impl_Bonobo_EventSource_addListenerWithMask): upd.
	(impl_Bonobo_EventSource_removeListener): remove by equivalence
	and fix heinous bug.
	(bonobo_event_source_client_add_listener_gc): upd.
	(bonobo_event_source_client_add_listener): upd.

	* bonobo/bonobo-event-source.h: remove Id crufty.

	* idl/Bonobo_Listener.idl: re-vamp to fit a modern understanding
	of CORBA_Object_is_equivalent.

2001-07-30  ERDI Gergo <cactus@cactus.rulez.org>

	* bonobo/bonobo-generic-factory.c
	(bonobo_generic_factory_new): impl.
	(bonobo_generic_factory_new_gc): switch to gclosure.
	(bonobo_generic_factory_new_generic): update invocation
	mechanism.

	* bonobo/bonobo-event-source.c
	(bonobo_event_source_client_add_listener): gclosurize.
	(bonobo_event_source_client_add_listener_gc): move body here.

	* bonobo/bonobo-listener.c (impl_Bonobo_Listener_event): upd.
	(bonobo_listener_new): impl.
	(bonobo_listener_new_gc): move here.

	* bonobo/bonobo-shlib-factory.c (bonobo_shlib_factory_new): impl.
	(bonobo_shlib_factory_new_gc): impl.

2001-07-30  ERDI Gergo <cactus@cactus.rulez.org>

	Checked in Bonobo_Clipboard (now for real:)

2001-07-30  Jamil Geor <geor@ihug.co.nz>

	* bonobo/bonobo-stream-client.c (bonobo_stream_client_get_length):
	update to make exception environment optional.

2001-07-29  Maciej Stachowiak  <mjs@noisehavoc.org>

	* bonobo/Makefile.am: Remove references to Bonobo_Clipboard.idl
	since it appears to be missing.
	* idl/Bonobo.idl: Ditto.
	* idl/Makefile.am: Ditto.

2001-07-29  ERDI Gergo  <cactus@cactus.rulez.org>

	* configure.in: bumped version number (depend on 1.99.0 if you
	want to access the Clipboard)

	* idl/Bonobo_Clipboard.idl: Moved here from bonobo-clipboard (the
	implementation still resides there)

2001-07-29  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-types.c (bonobo_closure_invoke): impl.
	(bonobo_closure_invoke_va_list): impl.

2001-07-28  ERDI Gergo  <cactus@cactus.rulez.org>

	* bonobo/bonobo-generic-factory.c: removed bonobo_generic_factory_set

	* monikers/bonobo-moniker-std.c: Changed
	BONOBO_OAF_SHLIB_FACTORY_MULTI to BONOBO_OAF_SHLIB_FACTORY

	* configure.in: bumped version number because of
	BonoboGenericFactory API change

	* bonobo/bonobo-generic-factory.[ch]: Removed single/multi factory
	ambiguity. If you use a single factory, you will have to migrate
	to the multi factory setting (this should be very easy, just add a
	const char* argument to your factory callback function).
	Moved instance data to a private structure for more flexibility.

	* bonobo/bonobo-shlib-factory.[ch]: ditto

2001-07-28  Jamil Geor <geor@ihug.co.nz>

	* bonobo/bonobo-object.c (bonobo_object_query_interface), 
	(bonobo_unknown_ping): add opt_evs
	(bonobo_object_dup_ref): document opt ev as optional.
	(bonobo_object_release_unref): ditto.

	* bonobo/bonobo-moniker-extender.c (bonobo_moniker_find_extender): 
	make ev optional.
	(bonobo_moniker_use_extender): ditto.

	* changes.txt: update.

2001-07-28  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-object.c
	(bonobo_object_unref): special case imortal objects.
	(bonobo_object_trace_refs): ditto.
	(bonobo_object_set_imortal): impl.

2001-07-28  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-object.c (bonobo_object_dummy_destroy): impl
	to make chaining easier.
	(bonobo_object_class_init): hook up.

2001-07-27  Laszlo Peter  <laca@ireland.sun.com>

	* bonobo/bonobo-arg.h: fix BONOBO_ARG_SET_GENERAL for non-GNU
	C compilers.

2001-07-27  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-object.c (bonobo_object_destroy): fire
	a DESTROY signal, not a glib internal dispose signal !
	(bonobo_object_dispose): kill.
	(bonobo_object_class_init): unhook dispose.

	* bonobo/bonobo-moniker-util.c: update the table of builtin
	monikers.

	* monikers/Bonobo_Moniker_std.oaf.in.in: remove stale file &
	extender mis-information.

2001-07-26  Darin Adler  <darin@bentspoon.com>

	* tests/.cvsignore: Add test-storage-mem.

2001-07-26  ERDI Gergo  <cactus@cactus.rulez.org>

	* bonobo/bonobo-storage-memory.h: Virtualized implementations to
	make subclassing possible

	* bonobo/bonobo-persist-client.h: Client-side utility functions
	dealing with persistancy

2001-07-26  Michael Meeks  <michael@ximian.com>

	* bonobo/Makefile.am (libbonobo_2_la_SOURCES): update for
	new ORBit2 orbit-idl '--imodule' flag.

2001-07-26  Michael Meeks  <michael@ximian.com>

	* idl/Bonobo_UI.idl: add the setAttr / getAttr stuff...

2001-07-25  ERDI Gergo  <cactus@cactus.rulez.org>

	* bonobo/bonobo-stream-memory.h: Removed #define BonoboStorageMem
	that makes no sense now that we have a real thing

2001-07-24  ERDI Gergo  <cactus@cactus.rulez.org>

	* tests/test-storage-mem.c: Regression test for BonoboStorageMem

	* bonobo/bonobo-storage-memory.[ch]: New in-memory Bonobo::Storage
	implementation

2001-07-24  Martin Baulig  <martin@gnome.org>

	* bonobo/Makefile.am: Compile Bonobo_imodule.c into
	Bonobo_module.la and install it into $(prefix)/lib/orbit/.

2001-07-23  Martin Baulig  <martin@gnome.org>

	* bonobo/bonobo-moniker-util.c (url_to_name): Implemented
	this for ORBit2.

2001-07-09  Lutz Müller  <urc8@rz.uni-karlsruhe.de>

        * bonobo/bonobo-stream-memory.[c,h]: Make mem_[get,set]_info
        functional.

2001-07-22  Mike Kestner <mkestner@speakeasy.net>

	Added tag BEFORE_DOC_REWRITE prior to this commit.

	* bonobo/Makefile.am : remove Bonobo_ClientSite.idl from build.
	* bonobo/bonobo-exception.c : kill Bonobo_Embeddable exception strings
	* idl/Bonobo.idl : remove Bonobo_ClientSite.idl.
	* idl/Bonobo_Embeddable.idl : kill View, ViewFrame, and get Embeddable.
	Add the new CanvasComponentFactory and ControlFactory interfaces.
	* idl/Bonobo_ClientSite.idl : kill.
	* idl/Makefile.am : remove Bonobo_ClientSite.idl from build.
	
2001-07-21  ERDI Gergo  <cactus@cactus.rulez.org>

	* changes.txt (Bonobo_Persist): Added note about new getIId method

2001-07-21  Mike Kestner <mkestner@speakeasy.net>

	* changes.txt : Added blurb about isDirty changes.

	* bonobo/bonobo-persist.[ch] (impl_Bonobo_Persist_isDirty): new.
	(bonobo_persist_class_init): hook in the new method.
	(bonobo_persist_set_dirty): new accessor.

	* bonobo/bonobo-persist-stream.[ch] : kill isDirty

	* bonobo/bonobo-presist-file.[ch] : kill isDirty

	* idl/Bonobo_Persist.idl : Promote isDirty into the Persist base 
	interface.

2001-07-19  ERDI Gergo  <cactus@cactus.rulez.org>

	* tests/Makefile.am (TESTS): Added test-stream-mem

	* tests/test-stream-mem.c: New test to see if BonoboStreamMem
	works (currently, it looks like it doesn't)

2001-07-19  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-types.c (BONOBO_TYPE_CORBA_OBJECT_IMPL): fix
	redundant '##'s.

	* bonobo/bonobo-object.c: remove bonobo-object-directory include

	* bonobo/bonobo-object-directory.[ch]: remove.

2001-07-18  Michael Meeks  <michael@ximian.com>

	* bonobo/Makefile.am (libbonoboinclude_HEADERS): don't install /
	build bonobo-object-directory - it's horribly stale and old.

2001-07-18  Martin Baulig  <martin@gnome.org>

	* bonobo/bonobo-types.[ch]: New files.

	* bonobo/bonobo-object.h (BonoboObjectClass): Made "query_interface"
	a virtual method, not a signal.

2001-07-17  Michael Meeks  <michael@ximian.com>

	* bonobo/Makefile.am (libbonoboinclude_HEADERS): don't install
	bonobo-simple-source.h it's incredibly old and stale.

2001-07-17  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-main.c (bonobo_x_error_handler): kill,
	(bonobo_setup_x_error_handler): kill - in libbonoboui now.

	* bonobo/bonobo-object.c:
	s/bonobo_object_finalize_real/bonobo_object_finalize_gobject/
	s/bonobo_object_finalize/bonobo_object_finalize_internal/
	(bonobo_object_corba_deactivate): don't poa_fini_fn & split from
	(bonobo_object_finalize_gobject): here, prune corba deactivate.
	s/do_corba_hacks/do_corba_setup/
	(bonobo_object_instance_init): add a g_object ref here.
	(bonobo_type_setup): register servant finalization.
	(bonobo_object_finalize_servant): impl.
	(bonobo_object_slist_unref_all): actualy impl.

2001-07-14  Martin Baulig  <martin@gnome.org>

	* bonobo/libbonobo-2.0.pc.in (idldir): New variable.

	* configure.in: Require autoconf 2.50b and use PKG_CHECK_MODULES.

2001-07-13  Darin Adler  <darin@bentspoon.com>

	* bonobo/bonobo-arg.h:
	* bonobo/bonobo-arg.c: (bonobo_arg_is_equal): Take const BonoboArg *.

	* configure.in: Elminate redundant macros.

2001-07-12  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-generic-factory.c (init_generic_factory_corba_class):
	remove, unroll into
	(bonobo_generic_factory_class_init): here, setup the
	_base_epv.

2001-07-12  Martin Baulig  <martin@gnome.org>

	* bonobo/bonobo-marshal.list: Added `VOID:POINTER,STRING' and
	`VOID:STRING,INT,STRING'.

2001-07-11  Martin Baulig  <martin@gnome.org>

	* bonobo/bonobo-generic-factory.c (init_generic_factory_corba_class):
	Initialize `bonobo_generic_factory_vepv._base_epv'.

2001-07-05  Tim Mooney <mooney@dogbert.cc.ndsu.NoDak.edu>

	* bonobo/bonobo-exception.h (bonobo_return_if_fail,
	bonobo_return_val_if_fail): change __PRETTY_FUNCTION__ hold-over to
	glib-provided G_GNUC_PRETTY_FUNCTION.

	* doc/api/bonobo-decl.txt: same.

2001-07-11  Michael Meeks  <michael@ximian.com>

	* tests/test-object.c (main): expand to try and catch
	nasties - no joy.

	* bonobo/bonobo-moniker.c (bonobo_moniker_init): init
	the prefix to NULL.

2001-07-11  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-object.c (bonobo_object_dump_interfaces),
	(bonobo_type_setup): prune ENABLE_ORBIT2 paths.

	* bonobo/bonobo-arg.c (bonobo_arg_new): ditto.

	* bonobo/Makefile.am: don't build / install
	bonobo-transient, not used & complicates our transition
	to a new system.

2001-07-10  Michael Meeks  <michael@ximian.com>

	* configure.in: always define ENABLE_ORBIT2
	bump version to 1.97.0, require ORBit2 - from CVS.

2001-07-10  Michael Meeks  <michael@ximian.com>

	* tests/Makefile.am: remove test-storage - it's inside
	libgnome now.

	* bonobo/Makefile.am: remove bonobo-storage-plugin.[ch]

	* bonobo/bonobo-storage.h: horribly savage.

	* bonobo/bonobo-storage.c: remove all deprecated crud,
	except std. bonobo_storage_copy_to impl.

	* changes.txt: document the fun.

2001-07-09  Michael Meeks  <michael@ximian.com>

	* monikers/Makefile.am (libmoniker_std_la_SOURCES): remove
	bonobo-moniker-extender-file, bonobo-moniker-file: now in
	libgnome where they have a gnome-vfs dependency.

	* monikers/bonobo-moniker-std.c (bonobo_std_moniker_factory):
	remove file bits & re-enable query moniker.

	* monikers/bonobo-moniker-std.h: ditto.

2001-07-06  Michael Meeks  <michael@ximian.com>

	* tests/test-properties-client.c (create_bag_client): add call to
	bonobo_pbclient_set.

	* bonobo/bonobo-property-bag-client.c
	(bonobo_pbclient_set, bonobo_pbclient_get): impl.
	(bonobo_pbclient_getv): update to take typesafe name / type / value
	triplets instead of unsafe name / value pairs.
	(bonobo_pbclient_setv): ditto & bail when we hit an exception.

2001-07-06  Christian Rose  <menthos@menthos.com>

	* configure.in: Added sv to ALL_LINGUAS.

2001-07-02  Dietmar Maurer  <dietmar@ximian.com>

	* bonobo/bonobo-shlib-factory.c (bonobo_shlib_factory_track_object):
	s/g_signal_connectc/g_signal_connect/ 

	* bonobo/bonobo-running-context.c (bonobo_running_context_class_init): 
	s/g_signal_newc/g_signal_new/ s/g_signal_connectc/g_signal_connect/

	* bonobo/bonobo-listener.c (bonobo_listener_class_init):  
	s/g_signal_newc/g_signal_new/

	* bonobo/bonobo-item-container.c: s/g_signal_newc/g_signal_new/

	* idl/Bonobo_Property.idl: added flags to addDatabase

	* bonobo/bonobo-object.c: s/shutdown/dispose/ 
	s/g_signal_newc/g_signal_new/

Sat Jun 30 14:53:52 2001  Jonathan Blandford  <jrb@redhat.com>

	* tests/test-properties-server.c (main): Change to reflect new
	g_signal_connect_data signature.

	* bonobo/bonobo-main.c (bonobo_init_full): change to reflect new
	g_type_init () signature.

2001-06-28  Dietmar Maurer  <dietmar@ximian.com>

	* bonobo/bonobo-property-bag-client.c: bug fix: cast to
	CORBA_boolean intead of gboolean.

2001-06-28  Michael Meeks  <michael@ximian.com>
	[ also by Laszlo PETER <Laszlo.Peter@ireland.sun.com> ]

	* bonobo/bonobo-object.h: update for new glib paths, we require
	HEAD glib now.

	* bonobo/bonobo-main.c: ditto.

	* libbonobo.h: upd.

	* *.c: add more string.h includes.

2001-06-27  Michael Meeks  <michael@ximian.com>

	* bonobo/Makefile.am: add bonobo-storage / stream plugin.

	* tests/test-storage.c (main): don't test efs.

2001-06-26  Michael Meeks  <michael@ximian.com>

	* configure.in: add --enable-orbit2=[yes/no]

	* orbit2-convert.pl: fix some buglets.

	* bonobo/bonobo-arg.c (bonobo_arg_new): port to new DynamicAny
	conditionaly.

	* bonobo/bonobo-async.c: disable for ORBit2.

	* bonobo/bonobo-moniker-util.c (bonobo_string_to_CosNaming_Name):
	impl for ORBit2 case. (url_to_name): trash for ORBit2 - FIXME.

	* bonobo/bonobo-object.c (bonobo_object_dump_interfaces): upd.
	(bonobo_type_setup): init base_epv for ORBit2.

	* bonobo/bonobo-object.h: Add PortableServer_ServantBase__epv
	for both cases - only used in ORBit2 version.

	* bonobo/bonobo-property-bag-client.c: renamed all TC_ duffness.

	* bonobo/bonobo-transient.c: disabled for ORBit2 - not used
	anyway.

	* *.c: added lots of missing string.h includes.

2001-06-26  Fatih Demir <kabalak@gtranslator.org>

	* configure.in: Added ta to the languages list.

2001-06-21  ERDI Gergo  <cactus@cactus.rulez.org>

        * idl/Bonobo_Persist.idl: Added new getIId method to
        Bonobo::Persist

        * bonobo/bonobo-persist.[ch]:
        * bonobo/bonobo-persist-file.[ch]:
        * bonobo/bonobo-persist-stream.[ch]: Added code to support
        Bonobo::Persist::getIID

        * bonobo/bonobo-persist-stream.[ch]: Since new arguments are added
        to _new and _construct, I removed the legacy dummy argument

2001-06-19  Peter Williams  <peterw@ximian.com>

	* bonobo/bonobo-property-bag.c (bonobo_property_bag_add_gtk_args): 
	Update to match new GObject property retrieval API.

2001-06-19  Héctor García Álvarez <hector@scouts-es.org>

	* configure.in: added "es" for Spanish to $ALL_LINGUAS

2001-06-15  Dietmar Maurer  <dietmar@ximian.com>

	* monikers/bonobo-stream-cache.c (cache_setInfo): return void

	* bonobo/bonobo-property-bag.c (bonobo_property_bag_add): return void

	* bonobo/bonobo-moniker.c (impl_set_parent): don't return a value,
	because function is void.

2001-06-13  Stanislav Visnovsky  <visnovsky@nenya.ms.mff.cuni.cz>

	* configure.in: added "sk" for Slovak to $ALL_LINGUAS

2001-06-07  Pablo Saratxaga  <pablo@mandrakesoft.com>

	* configure.in: added "az", and Norwegian to $ALL_LINGUAS

2001-06-06  Dietmar Maurer  <dietmar@ximian.com>

	* bonobo/Makefile.am ($(CORBA_SOURCE)): removed --small option

	* idl/Bonobo_Property.idl: removed that unused filter_path

2001-06-05  Dietmar Maurer  <dietmar@ximian.com>

	* bonobo/bonobo-event-source.c
	(bonobo_event_source_client_remove_listener): removed
	Bonobo_Property_ code

2001-06-04  Peter Williams  <peterw@ximian.com>

	* configure.in (OAF_IDL_DIR): Grab oaf's IDL directory for use with
	orbit-idl later.
	(utility_conditional): Remove a duplicate of the "utility 
	conditional"
	
	* bonobo/Makefile.am (idl_flags): Use OAF_IDL_DIR here.
	
2001-06-01  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-event-source.c (bonobo_event_source_destroy):
	make it cope with the list changing under it.
	(impl_Bonobo_EventSource_removeListener): fix heinous g_slist
	usage issues - gack.

2001-05-30  Christophe Merlet  <redfox@eikonex.org>

	* configure.in: added fr to $ALL_LINGUAS

2001-05-30  Dietmar Maurer  <dietmar@ximian.com>

	* bonobo/bonobo-property-bag-client.c (unref_default_bag): added a
	mutex to make it thread save.

2001-05-28  Dietmar Maurer  <dietmar@ximian.com>

	* bonobo/bonobo-property-bag-client.c (get_default_bag): impl.
	we can pass CORBA_OBJECT_NIL to all bonobo_pbclient_* functions
	(and we use the default property bag in that case).

2001-05-19  Martin Baulig  <martin@gnome.org>

	* bonobo/bonobo-generic-factory.h
	(BONOBO_OAF_FACTORY, BONOBO_OAF_FACTORY_MULTI): Make this actually work.

	* bonobo/bonobo-main.c (bonobo_init_full): Call oaf_init(), not
	oaf_orb_init() so that oaf gets the command line arguments.

2001-05-15  Martin Baulig  <martin@gnome.org>

	* bonobo/Makefile.am (ORBIT_IDL): Use @ORBIT_IDL@ rather than
	hardcoding `orbit-idl'.

2001-05-04  Dietmar Maurer  <dietmar@ximian.com>

	* bonobo/bonobo-xobject.h: use G_BEGIN/END_DECLS

2001-05-03  Dietmar Maurer  <dietmar@ximian.com>

	* bonobo/bonobo-property-bag-client.[ch]: complete new code.

	* idl/Bonobo_Property.idl: rewrote the idl. 

	* bonobo/bonobo-event-source.c
	(bonobo_event_source_client_remove_listener): we dont have
	Property object anymore - removed that code.
	(bonobo_event_source_client_add_listener): removed Property code.

	* bonobo/bonobo-property-bag.[ch]: new implementation. 

	* idl/Bonobo_ConfigDatabase.idl: removed, we use the new
	PropertyBag instead

2001-05-03  Michael Meeks  <michael@ximian.com>

	* monikers/bonobo-stream-cache.[ch]: port to HEAD.

	* bonobo/bonobo-stream-memory.c (bonobo_stream_mem_get_type):
	fix class size buglet

	* monikers/bonobo-stream-cache.c (create_stream_cache_server):
	kill.

2001-05-02  Michael Meeks  <michael@ximian.com>

	* tests/Makefile.am: add test-object

	* tests/test-object.c: add from HEAD bonobo test-xobject

2001-05-02  Michael Meeks  <michael@ximian.com>

	* Serious cruft cleaning - kill unused things.

	* bonobo/bonobo-persist-stream.c (impl_get_size_max): kill.
	(bonobo_persist_stream_class_init): kill.
	(bonobo_persist_stream_size_unknown): kill.
	(bonobo_persist_stream_new),
	(bonobo_persist_stream_construct): upd.

	* idl/Makefile.am: kill Bonobo/Advise,
	Bonobo/ProgressiveDataSink, Bonobo/DesktopWindow

2001-05-02  Michael Meeks  <michael@ximian.com>
	
	* bonobo/Makefile.am: remove bonobo-object-io.[ch],
	bonobo-object-client.[ch]

	* libbonobo.h: remove bonobo-object-client.h

	* bonobo-object-client.[ch]: kill totaly.

	* bonobo/bonobo-moniker-util.c
	(bonobo_moniker_client_resolve_client_default): removed

2001-05-01  Michael Meeks  <michael@ximian.com>

	* bonobo/Makefile.am: improve IDL compilation dependency
	code.

2001-05-01  Martin Baulig  <martin@gnome.org>

	* bonobo/Makefile.am (libbonobo_2_la_SOURCES): Added
	bonobo-object-directory.c.

	* bonobo/bonobo-object-directory.c
	(bonobo_directory_find_for_file): #ifdef FIXME this whole
	function.

2001-04-23  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-generic-factory.h: Remove redundant
	environments

2001-04-24  Martin Baulig  <martin@gnome.org>

	* bonobo/bonobo-marshal.list: Added `VOID:STRING,BOOLEAN' and
	`VOID:POINTER,INT,POINTER' (for libbonoboui).

2001-04-23  Martin Baulig  <martin@gnome.org>

	* bonobo/bonobo-generic-factory.h (BonoboGenericFactory):
	Added `GNOME_ObjectFactory corba_objref'.
	(bonobo_generic_factory_corba_objref): New global function.
	(bonobo_generic_factory_corba_object_create): Changed return
	type from CORBA_Object to GNOME_ObjectFactory.
	(bonobo_generic_factory_construct): Changed type of the
	`corba_factory' argument from CORBA_Object to GNOME_ObjectFactory.

	* bonobo/bonobo-generic-factory.c: Make this actually work.
	* bonobo/bonobo-shlib-factory.c: Likewise.

2001-04-20  Martin Baulig  <martin@gnome.org>

	* configure.in, Makefile.am: Added idl/ directory.

2001-04-20  Michael Meeks  <michael@ximian.com>

	* bonobo/Makefile.am: add bonobo-config-database.[ch]

	* bonobo/bonobo-config-database.[ch]: add from bonobo-conf

	* idl/Makefile.am: add Bonobo_ConfigDatabase.idl

	* idl/Bonobo_ConfigDatabase.idl: add.

2001-04-19  Michael Meeks  <michael@ximian.com>

	* bonobo/Makefile.am: don't install the old no-inst
	headers.

2001-04-18  Michael Meeks  <michael@ximian.com>

	* bonobo/Makefile.am: remove bonobo-defs.h - unneccessary.
	remove half cocked libbonoboh.

	* bonobo/libbonobo.h: remove.

	* *.[ch] [ except bonobo-xobject.h - for compat ]
	
	s/bonobo_x_object/bonobo_object/g;
	s/BONOBO_X_/BONOBO_/g;
	s/BonoboXObject/BonoboObject/g;
	s/BEGIN_BONOBO_DECLS/G_BEGIN_DECLS/g;
	s/END_BONOBO_DECLS/G_END_DECLS/g;
	s/\#include[ \t]*<bonobo\/bonobo-defs.h>//;
	s/bonobo-xobject/bonobo-object/g;
	
2001-04-18  Michael Meeks  <michael@ximian.com>

	* tests/*.c: update initializations.

	* bonobo/bonobo-main.c (bonobo_init): add g_type_init.
	(bonobo_init): add oaf_orb_init, update sig. rename to
	(bonobo_init_full): this and add (bonobo_init).

2001-04-18  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-main.c (bonobo_init): guard against double
	initialization.

2001-04-18  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-object.c (bonobo_object_destroy): remove
	destroy_id fiddling.
	(bonobo_object_usage_error): remove for now.

	* bonobo/bonobo-transient.c (bonobo_transient_get_type): use
	sizeof (BonoboTransientClass) for the class data.

2001-04-18  Martin Baulig  <martin@gnome.org>

	* configure.in: Removed one of the two GNOME_COMPILE_WARNINGS
	macros; we only need it once.

2001-04-18  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-stream.h: add back to build for compat,
	include bonobo-storage.h

	* bonobo/bonobo-running-context.c (bonobo_running_context_new): 
	connect to final_unref.

	* bonobo/bonobo-object.c (bonobo_object_instance_init): fix
	thinko.
	(bonobo_object_class_init): add more useful assertions and
	add "destroy" signal - this sucks but is very compatible.
	(bonobo_object_shutdown): impl.

2001-04-18  Michael Meeks  <michael@ximian.com>

	* tests/test-storage.c (stream_copy_tests): prune copyTo
	test.

2001-04-18  Martin Baulig  <martin@gnome.org>

	* bonobo/*.[ch]: Use <bonobo/bonobo-defs.h> and
	<bonobo/bonobo-i18n.h> instead of the libgnomebase ones.

	* bonobo/bonobo-main.c (bonobo_setup_x_error_handler):
	#ifdef'ed this out.

	* bonobo/bonobo-defs.h, bonobo/bonobo-i18n.h: New files.

	* bonobo/libbonobo-init.[ch]: Removed.

	* configure.in: Don't depend on libgnomebase.

2001-04-18  Martin Baulig  <martin@gnome.org>

	* configure.in: Depend on ORBit-CosNaming-2 and include it in
	the ORBit check.

	* bonobo/libbonobo-2.0.pc.in: Added ORBit-CosNaming-2 to the
	dependency list.

2001-04-17  Michael Meeks  <michael@ximian.com>

	* bonobo/Makefile.am (libbonobo_2_la_SOURCES): add
	bonobo-property-bag-xml.c

	* Makefile.am: add libbonobo.h

2001-04-17  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-property-bag-xml.h: include bonobo-node.h

	* bonobo/bonobo-node.[ch]: create from bonobo-ui-node,
	renaming to suit.
	(do_strip): Adapt for libxml2.

	* tests/*: fixup.

2001-04-18  Martin Baulig  <martin@gnome.org>

	* bonobo/bonobo-item-container.[ch]: Ported to GObject.

	* bonobo/bonobo-marshal.list: Added `POINTER:POINTER,BOOLEAN,POINTER'
	and `BOOLEAN:POINTER'.

2001-04-17  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-generic-factory.c (bonobo_generic_factory_corba_object_create): 
	upd.
	(activate_servant): drag in from old bonobo-object.
	(bonobo_generic_factory_corba_object_create): upd.

2001-04-17  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-object.c (bonobo_object): impl.
	(bonobo_object_finalize_real): upd.
	(do_corba_hacks): move from bonobo_xobject.c
	(bonobo_object_get_refs): kill.

	* bonobo/Makefile.am: remove bonobo-xobject.c, leave only the
	header for compat.

	* bonobo/bonobo-object.c (bonobo_object_get_epv): kill.
	(bonobo_object_construct, bonobo_object_new_from_servant),
	(bonobo_object_bind_to_servant, bonobo_object_activate_servant),
	(bonobo_object_activate_servant_full): kill.

2001-04-17  Michael Meeks  <michael@ximian.com>

	* idl/Bonobo_Storage.idl: kill copyTo - its Broken!

	* bonobo/bonobo-stream-memory.c (bonobo_stream_mem_class_init): 
	fill epv.
	(bonobo_stream_mem_create): upd.
	(bonobo_stream_mem_get_type): we're a BonoboXObject.
	(bonobo_stream_mem_construct): upd.

	* bonobo/bonobo-stream.c (bonobo_stream_open): kill
	(bonobo_stream_open_full): rename to (bonobo_stream_open): this.

	* changes.txt: add doc on changes between Bonobo 1.0 and 2.0

2001-04-17  Michael Meeks  <michael@ximian.com>

	* autogen.sh: fixup so we configure, always dump the message of
	doom.

	* message-of-doom: make more explicit and doomful.

2001-04-17  Martin Baulig  <martin@gnome.org>

	* tests/Makefile.am: New file; this is almost empty at the moment.

2001-04-17  Martin Baulig  <martin@gnome.org>

	* bonobo/*.[ch]: Ported to GObject.

	* bonobo/bonobo-exception.h (BONOBO_EX_REPOID): New macro.

	* bonobo/bonobo-marshal-main.c: New file.
	* bonobo/bonobo-marshal.list: New file.

	* bonobo/libbonobo-init.c: New file.
	* bonobo/libbonobo-init.h: New public header file; you only need to
	include this to get the module initialization stuff.

	* bonobo/libbonobo.h: New public header file; if you're only using
	libbonobo (and not libbonoboui), use <bonobo/libbonobo.h> instead of
	<bonobo/bonobo.h>. There'll also be <bonobo/libbonoboui.h> in
	libbonoboui - and <bonobo/bonobo.h> will include both of them.

	* bonobo/bonobo-main.c (bonobo_main_quit): New function.

2001-04-17  Martin Baulig  <martin@gnome.org>

	* configure.in: Check for gobject and gthread.

2001-04-15  Martin Baulig  <martin@gnome.org>

	* configure.in: Added check for dladdr() from bonobo/configure.in
	and require libgnomebase.

2001-04-13  Martin Baulig  <martin@gnome.org>

	* bonobo/Makefile.am: Added simple Makefile.am.

	* bonobo/libbonobo-2.0.pc.in: New file.

2001-04-13  Martin Baulig  <martin@gnome.org>

	* AUTHORS, DEPENDS, HACKING, MAINTAINERS, NEWS, COPYING.LIB,
	README, TODO, TRANSLATABLE_FILES, USERS, OChangeLog-2000-12-11:
	Copied here from bonobo.

	* OChangeLog-2001-04-13: Copied here from bonobo/ChangeLog.

