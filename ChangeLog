2001-05-30  Dietmar Maurer  <dietmar@ximian.com>

	* bonobo/bonobo-property-bag-client.c (unref_default_bag): added a
	mutex to make it thread save.

2001-05-28  Dietmar Maurer  <dietmar@ximian.com>

	* bonobo/bonobo-property-bag-client.c (get_default_bag): impl.
	we can pass CORBA_OBJECT_NIL to all bonobo_pbclient_* functions
	(and we use the default property bag in that case).

2001-05-19  Martin Baulig  <baulig@suse.de>

	* bonobo/bonobo-generic-factory.h
	(BONOBO_OAF_FACTORY, BONOBO_OAF_FACTORY_MULTI): Make this actually work.

	* bonobo/bonobo-main.c (bonobo_init_full): Call oaf_init(), not
	oaf_orb_init() so that oaf gets the command line arguments.

2001-05-15  Martin Baulig  <baulig@suse.de>

	* bonobo/Makefile.am (ORBIT_IDL): Use @ORBIT_IDL@ rather than
	hardcoding `orbit-idl'.

2001-05-04  Dietmar Maurer  <dietmar@ximian.com>

	* bonobo/bonobo-xobject.h: use G_BEGIN/END_DECLS

2001-05-03  Dietmar Maurer  <dietmar@ximian.com>

	* bonobo/bonobo-property-bag-client.[ch]: complete new code.

	* idl/Bonobo_Property.idl: rewrote the idl. 

	* bonobo/bonobo-event-source.c
	(bonobo_event_source_client_remove_listener): we dont have
	Property object anymore - removed that code.
	(bonobo_event_source_client_add_listener): removed Property code.

	* bonobo/bonobo-property-bag.[ch]: new implementation. 

	* idl/Bonobo_ConfigDatabase.idl: removed, we use the new
	PropertyBag instead

2001-05-03  Michael Meeks  <michael@ximian.com>

	* monikers/bonobo-stream-cache.[ch]: port to HEAD.

	* bonobo/bonobo-stream-memory.c (bonobo_stream_mem_get_type):
	fix class size buglet

	* monikers/bonobo-stream-cache.c (create_stream_cache_server):
	kill.

2001-05-02  Michael Meeks  <michael@ximian.com>

	* tests/Makefile.am: add test-object

	* tests/test-object.c: add from HEAD bonobo test-xobject

2001-05-02  Michael Meeks  <michael@ximian.com>

	* Serious cruft cleaning - kill unused things.

	* bonobo/bonobo-persist-stream.c (impl_get_size_max): kill.
	(bonobo_persist_stream_class_init): kill.
	(bonobo_persist_stream_size_unknown): kill.
	(bonobo_persist_stream_new),
	(bonobo_persist_stream_construct): upd.

	* idl/Makefile.am: kill Bonobo/Advise,
	Bonobo/ProgressiveDataSink, Bonobo/DesktopWindow

2001-05-02  Michael Meeks  <michael@ximian.com>
	
	* bonobo/Makefile.am: remove bonobo-object-io.[ch],
	bonobo-object-client.[ch]

	* libbonobo.h: remove bonobo-object-client.h

	* bonobo-object-client.[ch]: kill totaly.

	* bonobo/bonobo-moniker-util.c
	(bonobo_moniker_client_resolve_client_default): removed

2001-05-01  Michael Meeks  <michael@ximian.com>

	* bonobo/Makefile.am: improve IDL compilation dependency
	code.

2001-05-01  Martin Baulig  <baulig@suse.de>

	* bonobo/Makefile.am (libbonobo_2_la_SOURCES): Added
	bonobo-object-directory.c.

	* bonobo/bonobo-object-directory.c
	(bonobo_directory_find_for_file): #ifdef FIXME this whole
	function.

2001-04-23  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-generic-factory.h: Remove redundant
	environments

2001-04-24  Martin Baulig  <baulig@suse.de>

	* bonobo/bonobo-marshal.list: Added `VOID:STRING,BOOLEAN' and
	`VOID:POINTER,INT,POINTER' (for libbonoboui).

2001-04-23  Martin Baulig  <baulig@suse.de>

	* bonobo/bonobo-generic-factory.h (BonoboGenericFactory):
	Added `GNOME_ObjectFactory corba_objref'.
	(bonobo_generic_factory_corba_objref): New global function.
	(bonobo_generic_factory_corba_object_create): Changed return
	type from CORBA_Object to GNOME_ObjectFactory.
	(bonobo_generic_factory_construct): Changed type of the
	`corba_factory' argument from CORBA_Object to GNOME_ObjectFactory.

	* bonobo/bonobo-generic-factory.c: Make this actually work.
	* bonobo/bonobo-shlib-factory.c: Likewise.

2001-04-20  Martin Baulig  <baulig@suse.de>

	* configure.in, Makefile.am: Added idl/ directory.

2001-04-20  Michael Meeks  <michael@ximian.com>

	* bonobo/Makefile.am: add bonobo-config-database.[ch]

	* bonobo/bonobo-config-database.[ch]: add from bonobo-conf

	* idl/Makefile.am: add Bonobo_ConfigDatabase.idl

	* idl/Bonobo_ConfigDatabase.idl: add.

2001-04-19  Michael Meeks  <michael@ximian.com>

	* bonobo/Makefile.am: don't install the old no-inst
	headers.

2001-04-18  Michael Meeks  <michael@ximian.com>

	* bonobo/Makefile.am: remove bonobo-defs.h - unneccessary.
	remove half cocked libbonoboh.

	* bonobo/libbonobo.h: remove.

	* *.[ch] [ except bonobo-xobject.h - for compat ]
	
	s/bonobo_x_object/bonobo_object/g;
	s/BONOBO_X_/BONOBO_/g;
	s/BonoboXObject/BonoboObject/g;
	s/BEGIN_BONOBO_DECLS/G_BEGIN_DECLS/g;
	s/END_BONOBO_DECLS/G_END_DECLS/g;
	s/\#include[ \t]*<bonobo\/bonobo-defs.h>//;
	s/bonobo-xobject/bonobo-object/g;
	
2001-04-18  Michael Meeks  <michael@ximian.com>

	* tests/*.c: update initializations.

	* bonobo/bonobo-main.c (bonobo_init): add g_type_init.
	(bonobo_init): add oaf_orb_init, update sig. rename to
	(bonobo_init_full): this and add (bonobo_init).

2001-04-18  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-main.c (bonobo_init): guard against double
	initialization.

2001-04-18  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-object.c (bonobo_object_destroy): remove
	destroy_id fiddling.
	(bonobo_object_usage_error): remove for now.

	* bonobo/bonobo-transient.c (bonobo_transient_get_type): use
	sizeof (BonoboTransientClass) for the class data.

2001-04-18  Martin Baulig  <baulig@suse.de>

	* configure.in: Removed one of the two GNOME_COMPILE_WARNINGS
	macros; we only need it once.

2001-04-18  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-stream.h: add back to build for compat,
	include bonobo-storage.h

	* bonobo/bonobo-running-context.c (bonobo_running_context_new): 
	connect to final_unref.

	* bonobo/bonobo-object.c (bonobo_object_instance_init): fix
	thinko.
	(bonobo_object_class_init): add more useful assertions and
	add "destroy" signal - this sucks but is very compatible.
	(bonobo_object_shutdown): impl.

2001-04-18  Michael Meeks  <michael@ximian.com>

	* tests/test-storage.c (stream_copy_tests): prine copyTo
	test.

2001-04-18  Martin Baulig  <baulig@suse.de>

	* bonobo/*.[ch]: Use <bonobo/bonobo-defs.h> and
	<bonobo/bonobo-i18n.h> instead of the libgnomebase ones.

	* bonobo/bonobo-main.c (bonobo_setup_x_error_handler):
	#ifdef'ed this out.

	* bonobo/bonobo-defs.h, bonobo/bonobo-i18n.h: New files.

	* bonobo/libbonobo-init.[ch]: Removed.

	* configure.in: Don't depend on libgnomebase.

2001-04-18  Martin Baulig  <baulig@suse.de>

	* configure.in: Depend on ORBit-CosNaming-2 and include it in
	the ORBit check.

	* bonobo/libbonobo-2.0.pc.in: Added ORBit-CosNaming-2 to the
	dependency list.

2001-04-17  Michael Meeks  <michael@ximian.com>

	* bonobo/Makefile.am (libbonobo_2_la_SOURCES): add
	bonobo-property-bag-xml.c

	* Makefile.am: add libbonobo.h

2001-04-17  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-property-bag-xml.h: include bonobo-node.h

	* bonobo/bonobo-node.[ch]: create from bonobo-ui-node,
	renaming to suit.
	(do_strip): Adapt for libxml2.

	* tests/*: fixup.

2001-04-18  Martin Baulig  <baulig@suse.de>

	* bonobo/bonobo-item-container.[ch]: Ported to GObject.

	* bonobo/bonobo-marshal.list: Added `POINTER:POINTER,BOOLEAN,POINTER'
	and `BOOLEAN:POINTER'.

2001-04-17  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-generic-factory.c (bonobo_generic_factory_corba_object_create): 
	upd.
	(activate_servant): drag in from old bonobo-object.
	(bonobo_generic_factory_corba_object_create): upd.

2001-04-17  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-object.c (bonobo_object): impl.
	(bonobo_object_finalize_real): upd.
	(do_corba_hacks): move from bonobo_xobject.c
	(bonobo_object_get_refs): kill.

	* bonobo/Makefile.am: remove bonobo-xobject.c, leave only the
	header for compat.

	* bonobo/bonobo-object.c (bonobo_object_get_epv): kill.
	(bonobo_object_construct, bonobo_object_new_from_servant),
	(bonobo_object_bind_to_servant, bonobo_object_activate_servant),
	(bonobo_object_activate_servant_full): kill.

2001-04-17  Michael Meeks  <michael@ximian.com>

	* idl/Bonobo_Storage.idl: kill copyTo - its Broken!

	* bonobo/bonobo-stream-memory.c (bonobo_stream_mem_class_init): 
	fill epv.
	(bonobo_stream_mem_create): upd.
	(bonobo_stream_mem_get_type): we're a BonoboXObject.
	(bonobo_stream_mem_construct): upd.

	* bonobo/bonobo-stream.c (bonobo_stream_open): kill
	(bonobo_stream_open_full): rename to (bonobo_stream_open): this.

	* changes.txt: add doc on changes between Bonobo 1.0 and 2.0

2001-04-17  Michael Meeks  <michael@ximian.com>

	* autogen.sh: fixup so we configure, always dump the message of
	doom.

	* message-of-doom: make more explicit and doomful.

2001-04-17  Martin Baulig  <baulig@suse.de>

	* tests/Makefile.am: New file; this is almost empty at the moment.

2001-04-17  Martin Baulig  <baulig@suse.de>

	* bonobo/*.[ch]: Ported to GObject.

	* bonobo/bonobo-exception.h (BONOBO_EX_REPOID): New macro.

	* bonobo/bonobo-marshal-main.c: New file.
	* bonobo/bonobo-marshal.list: New file.

	* bonobo/libbonobo-init.c: New file.
	* bonobo/libbonobo-init.h: New public header file; you only need to
	include this to get the module initialization stuff.

	* bonobo/libbonobo.h: New public header file; if you're only using
	libbonobo (and not libbonoboui), use <bonobo/libbonobo.h> instead of
	<bonobo/bonobo.h>. There'll also be <bonobo/libbonoboui.h> in
	libbonoboui - and <bonobo/bonobo.h> will include both of them.

	* bonobo/bonobo-main.c (bonobo_main_quit): New function.

2001-04-17  Martin Baulig  <baulig@suse.de>

	* configure.in: Check for gobject and gthread.

2001-04-15  Martin Baulig  <baulig@suse.de>

	* configure.in: Added check for dladdr() from bonobo/configure.in
	and require libgnomebase.

2001-04-13  Martin Baulig  <baulig@suse.de>

	* bonobo/Makefile.am: Added simple Makefile.am.

	* bonobo/libbonobo-2.0.pc.in: New file.

2001-04-13  Martin Baulig  <baulig@suse.de>

	* AUTHORS, DEPENDS, HACKING, MAINTAINERS, NEWS, COPYING.LIB,
	README, TODO, TRANSLATABLE_FILES, USERS, OChangeLog-2000-12-11:
	Copied here from bonobo.

	* OChangeLog-2001-04-13: Copied here from bonobo/ChangeLog.

