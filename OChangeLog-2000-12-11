1999-05-31  Nat Friedman  <nat@gnome-support.com>

	* components/text-plain/bonobo-text-plain.c (SHOW_PROGRESS_INFO):
 	Define this for kicks.
	(bonobo_object_data_t): Added total_size field.
	(progressive_set_size): New function.
	(progressive_end): Likewise.
	(bonobo_object_factory): Hook up the callbacks for progressive_end
 	and progressive_set_size.
	(progressive_update): Update the progress meter.

1999-05-31  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* bonobo/gnome-component-client.c (gnome_bonobo_object_get_verbs):
	Helper routine to fetch the verbs supported by an embedded
	BonoboObject.
	(gnome_bonobo_object_free_verbs): Routine to release the return
	value returned from gnome_bonobo_object_get_verbs.

	* idl/gnome-component.idl (BonoboObject): Verbs are now only
	strings.  No code is now passed.
	
	* bonobo/gnome-component.c (gnome_bonobo_object_remove_verb,
	gnome_bonobo_object_add_verb, gnome_bonobo_object_add_verbs):
	Change the API to only use strings.

	* bonobo.spec.in (Obsoletes): Include *Conf.sh files in distribution.

	* bonobo/Makefile.am (EXTRA_DIST): Include corba_DATA in
	distirbution. 

1999-05-30  Matt Loper  <matt@gnome-support.com>

	* idl/gnome-component.idl (GNOME): Changed the GNOME::Component
	interface to GNOME::BonoboObject. This implies changes in all of
	the following files.

	* idl/gnome-persist.idl (GNOME): likewise

	* idl/gnome-inplace.idl (GNOME): likewise

	* components/text-plain/text-plain.gnorba: likewise

	* components/text-plain/bonobo-text-plain.c: likewise

	* components/image-x-png/image-x-png.gnorba: likewise

	* components/image-x-png/bonobo-image-x-png.c: likewise

	* bonobo/test-container.c: likewise

	* bonobo/test-container-autoload.c: likewise 

	* bonobo/sample.gnorba: likewise

	* bonobo/sample-server.c: likewise

	* bonobo/gnome-object.c: likewise

	* bonobo/gnome-inplace-component.c: likewise

	* bonobo/gnome-container.c: likewise.

	* bonobo/gnome-component.h: likewise

	* bonobo/gnome-component.c: likewise

	* bonobo/gnome-component-io.h: likewise

	* bonobo/gnome-component-io.c: likewise

	* bonobo/gnome-component-factory.h: likewise

	* bonobo/gnome-component-factory.c: likewise

	* bonobo/gnome-component-client.h: likewise

	* bonobo/gnome-component-client.c: likewise

	* bonobo/gnome-client-site.h: likewise

	* bonobo/gnome-client-site.c:likewise

1999-05-29  Nat Friedman  <nat@gnome-support.com>

	* components/text-plain/bonobo-text-plain.c (view_factory): Put
	the GtkText widget in a scrolled window.

1999-05-28  Nat Friedman  <nat@gnome-support.com>

	* components/text-plain/bonobo-text-plain.c
	(progressive_add_data): Removed the call to
	GNOME_SimpleDataSource_pop_data.  Now just use the buffer that
	comes from add_data.

	* bonobo/test-container.c (struct progressive_timeout): Now stores
	much less information since we don't need to manage a
	SimpleDataSource.  It now only stores the file we're loading data
	from and the GNOME_ProgressiveDataSinik.
	(ssource_pop_data): Removed, since we're no longer using the
	SimpleDataSource.
	(ssource_remaining_data): Likewise.
	(timeout_next_line): Modified to just send a buffer with add_buff.
	(send_text_cmd): No longer creates a SimpleDataSource interface
	object.

	* bonobo/gnome-progressive.h (GnomeProgressiveDataSinkAddDataFn):
	Modified to reflect the change in the interface to add_data.
	(GnomeProgressiveDataClass): Likewise.

	* bonobo/gnome-progressive.c (impl_add_data): Modified to reflect
	the change in the interface to add_data, which only takes one
	argument now.
	(gnome_progressive_data_sink_add_data_nop): Likewise.

	* bonobo/gnome-bonobo.h: Don't include gnome-simple-source.h

	* idl/gnome-progressive.idl: Removed SimpleDataSource interface.

	* bonobo/Makefile.am: Removed gnome-simple-source.c and
	gnome-simple-source.h

1999-05-28  Raja R Harinath  <harinath@cs.umn.edu>

	* configure.in (AC_OUTPUT): Remove 'sed .. POTFILES' expression.
	(AM_GNOME_GETTEXT): Use instead of AM_GNU_GETTEXT.
	(BONOBO_INCLUDEDIR): Use $GNOME_CONFIG instead of calling
	gnome-config directly.
	(BONOBO_LIBS): Likewise.

	* bonobo/Makefile.am (idl_flags): Use $(GNOME_CONFIG) instead of
	calling `gnome-config' directly.
	($(CORBA_SOURCE)): Use $(ORBIT_IDL) instead of calling `orbit-idl'
	directly. 

	* components/text-plain/Makefile.am (bonobo_text_plain_LDADD): 
	Use $(top_builddir) not $(top_srcdir).
	* components/image-x-png/Makefile.am (bonobo_image_x_png_LDADD): 
	Likewise.
	
1999-05-28  Nat Friedman  <nat@gnome-support.com>

	* Makefile.am (SUBDIRS): Added components.

	* bonobo/gnome-simple-source.c: New file which implements the
	GNOME::SimpleDataSource interface.
	* bonobo/gnome-simple-source.h: New file.

	* bonobo/gnome-progressive.c: New file which implements the
	GNOME::ProgressiveDataSink interface.
	* bonobo/gnome-progressive.h: New file.

	* idl/gnome-progressive.idl: New file which defines the interfaces
	for GNOME::ProgressiveDataSink and GNOME::SimpleDataSource, which
	work together to provide an interface for progressive loading of
	slow data streams to components.

	* idl/gnome-component.idl: Fixed comment.

	* idl/Makefile.am (idl_DATA): Added gnome-progressive.idl.

	* components/text-plain/bonobo-text-plain.c (free_text): Set
	component_data->text to NULL after freeing it.
	(blank_all_views): Don't blank blank views.
	(update_all_views): New function to perform non-progressive
	display updating, as occurs after new data is loaded through the
	PersistStream interface.
	(progressive_update): Renamed progressive_update_all_views to
	this.  It also updates the component data and is modified to take
	a char * buffer and a byte count.
	(stream_read): Don't call CORBA_exception_free, since we have a
	global exception.  Don't progressively update the display as we
	read data; stream_read is only used as a helper function for the
	PersistStream interface now.  Return -1 on error and 0 on success.
	(pstream_load): Renamed load_text_from_stream to this.  Modified
	to only update the display after the entire stream has been
	loaded.
	(pstream_save): New function to implement
	GNOME::PersistStream:save.
	(progressive_start): New function to implement
	GNOME::ProgressiveDataSink:start.
	(progressive_add_data): New function to implement
	GNOME::ProgressiveDataSink:add_data.
	(component_factory): Add the GNOME::ProgressiveDataSink interface.

	* bonobo/test-container.c: Added struct progressive_timeout to
	hold the closure data that needs to be sent to the timeout.
	(ssource_pop_data): New function.  Implements the
	GNOME::SimpleDataSource:pop_data method for progressive loading.
	(timeout_next_line): New function.  Timeout callback to send new
	data to the text/plain BonoboObject using the ProgressiveDataSink
	interface.
	(send_text_cmd): Modified to use ProgressiveDataSink.
	(container_file_menu): New accelerators.
	(ssource_remaining_data): New function to implement the
	GNOME::SimpleDataSource:remaining_data method.

	* bonobo/gnome-persist-stream.h: Added get_size_max_fn to
	GnomePersistStream.

	* bonobo/gnome-persist-stream.c (impl_get_size_max): Try to call
	the user-provided get_size_max function if it is available.

	* bonobo/gnome-bonobo.h: Include gnome-stream.h,
	gnome-stream-fs.h, gnome-progressive.h and gnome-simple-source.h

	* bonobo/Makefile.am (libbonobo_la_SOURCES): Added
	gnome-progressive.c and gnome-simple-source.c.
	(libbonobo_la_SOURCES): Added gnome-progressive.h and
	gnome-simple-source.h

	* bonobo/Makefile.am (idls): Added gnome-progresive.idl to idls
	list.

1999-05-28  Matt Loper  <matt@gnome-support.com>

	* bonobo/test-container-autoload.c: New file.

1999-05-27  Jacob Berkman  <jberkman@andrew.cmu.edu>

	* doc/.cvsignore: added file

	* bonobo/test-container.c (main): fix compiler warnings
	(should bonobo.h include gnome-stream-fs.h? 
	if so: remove #include <bonobo/gnome-stream-fs.h> from here)
	
1999-05-24  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* bonobo/gnome-storage-repo.c (gnome_storage_repo_class_init):
	Method rename from delete to erase to deal with C++.

	* bonobo/gnome-storage.c (init_storage_corba_class): ditto

	* idl/gnome-storage.idl: ditto.

1999-05-27  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* bonobo/gnome-component.c (gnome_component_remove_verb): Add
	routines for registering and unregistering verbs. 

	* bonobo/gnome-container.c (corba_container_class_init): Use corba
	init class mechanism instead of online initialization.

	* bonobo/gnome-view.c (impl_GNOME_View_size_allocate): Pass the
	size on the component to the actual widget.

	* bonobo/gnome-component-client.c (size_allocate): Propagage size
	changes to the client.

1999-05-27  Jacob Berkman  <jberkman@andrew.cmu.edu>

	* idl/gnome-component.idl: change a "Baboon" -> "Bonobo"

1999-05-27  Michael Meeks  <michael@imaginator.com>

	* idl/gnome-persist.idl: Polish docs.

	* idl/gnome-inplace.idl: typo.

1999-05-26  Jacob Berkman  <jberkman@andrew.cmu.edu>

	* components/text-plain/.cvsignore: added file

	* doc/Bonobo.sgml: changed some GNOME::object -> GNOME::obj

	* bonoboConf.sh.in: typo: XML -> Bonobo

1999-05-26  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* idl/Makefile.am (idl_DATA): Removed gnome-base.idl and
	gnome-object.idl from the list of files.

	* bonobo/Makefile.am (idls): Likewise.

1999-05-26    <sopwith@moebius.labs.redhat.com>

	* idl/bonobo.idl: Use GnomeObject.idl (from gnome-libs) instead of
	gnome-object.idl and gnome-base.idl

1999-05-26  Nat Friedman  <nat@nat.org>

	* components/text-plain/bonobo-text-plain.c (blank_all_views): New
 	function.
	(progressive_update_all_views): New function.
	(stream_read): Update the display as the data comes in.
	(load_text_from_stream): Updated to use the progressive display.
	(component_factory): No default text.
	(view_factory): No default text.

	* bonobo/test-container.c (add_text_cmd): Load /usr/dict/words.
	(text_obj): New variable.
	(send_text_cmd): New callback to send /tmp/pipe to the current
	text component.  To show off progressive loading.
	(container_file_menu): Added a menu entry for send_text_cmd.

1999-05-26  Nat Friedman  <nat@nat.org>

	* components/image-x-png/bonobo-image-x-png.c (view_factory): Add
 	the new view to the component_data's view list.

	* bonobo/test-container.c (add_text_cmd): New function to embed a
 	text/plain component.
	(container_file_menu): Added a menu item to embed a text/plain
 	component.

	* configure.in: Added components/text-plain/Makefile to the build
 	list.

	* components/text-plain/text-plain.gnorba (location_info): New file.

	* components/text-plain/Makefile.am: New file.

	* components/text-plain/bonobo-text-plain.c: New component to
 	implement the text/plain display component.

1999-05-25  Nat Friedman  <nat@nat.org>

	* components/image-x-png/image-x-png.gnorba (location_info):
 	Changed the description to "image/x-png component factory" for the
 	component-factory:image-x-png entry.
 
	* bonobo/test-container.c (add_cmd): Removed unused 'socket'
 	variable.  This stuff is handled in gnome-component-client.c these
 	days anyway.
	(add_cmd): Added call to gnome_component_client_activate.
	(add_image_cmd): Display a warning if the component can't be
 	added.
	(container_file_menu): Use the GNOMEUIINFO_MENU_EXIT_ITEM macro.

	* bonobo/gnome-component.c (gnome_component_class_init): Inherit
 	from GnomeObject, not GtkObject.
	(gnome_component_class_init): Added missing call to
 	gtk_object_class_add_signals.  Verbs now work.

	* bonobo/gnome-component-client.h: Added prototypes for
 	gnome_component_client_activate and
 	gnome_component_client_deactivate.

	* bonobo/gnome-component-client.c (gnome_component_new_view):
 	Don't call gtk_container_add on the socket twice.
	(gnome_component_client_deactivate): Renamed
 	gnome_object_client_deactivate to
 	gnome_component_client_deactivate.
	(gnome_component_client_activate): Renamed
 	gnome_object_client_activate to
 	gnome_component_client_activate.

1999-05-25  Havoc Pennington  <hp@pobox.com>

	* bonobo/gnome-component.c (impl_GNOME_Component_do_verb): Cast
	the varargs arguments to be sure they're the right size

	* bonobo/gnome-storage.h, bonobo/gnome-storage.c,
	idl/gnome-storage.idl:
	s/delete/erase (fixes from LE)

1999-05-18  Dietmar Maurer  <dm@vlsivie.tuwien.ac.at>

	* idl/gnome-storage.idl (interface Stream):
 	added new functions close, eos, length. seek now returns the 
	current position.
	* idl/gnome-storage.idl (interface Storage):
	renamed destory to delete 
	
1999-05-16  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* idl/gnome-object.idl, idl/*.idl: Renamed GNOME::object to
	GNOME::obj to make it complain to the CORBA standard (they do not
	let use use object in any case-sensitive fashion).

	* bonobo/gtk-interfaces.c: Simplified the code, cleaned up, and
	address the bug pointed out by Jacob: interfaces were not being
	propagated to all of the conforming objects, only to the last 2
	objects being assembled.

	* bonobo/object_test.c (test2): Extended interfaces tests to cover
	the bug found by Jacob.

	* bonobo/gtk-interfaces.c (gtk_object_query_interface): Use
	gtk_get_interface here, so that we can do query (A, A) and get A.
	Thanks to Dietmar for pointing this out.

1999-05-10  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* bonobo/gnome-storage-fs.c (gnome_storage_fs_get_type): use
	initialization class.

1999-05-14  Dietmar Maurer  <dm@vlsivie.tuwien.ac.at>

	* bonobo/gnome-stream-fs.c (fs_write): small fix 
	(gnome_stream_fs_create): added O_RDWR to open flags
	* bonobo/gnome-storage-fs.c 
	(gnome_storage_fs_create): small fix 
	* bonobo/gnome-storage-repo.[hc]: new files (librepo interface) 
	* bonobo/gnome-stream-repo.[hc]: new files (librepo interface)

1999-05-12  Dietmar Maurer  <dm@vlsivie.tuwien.ac.at>

	* bonobo/gnome-storage.[hc]: added destroy function
	
1999-05-11  Dietmar Maurer  <dm@vlsivie.tuwien.ac.at>

	* bonobo/gnome-storage.c (impl_*): don't access storage->object
	if object == NULL.
	
1999-04-28  Jacob Berkman  <jberk+@cmu.edu>

	* idl/Makefile.am (idl_DATA): install the .idl files in
	$(datadir)/idl

1999-04-28  Jacob Berkman  <jberk+@cmu.edu>

	* idl/Makefile.am (idl_files): install gnome-*.idl files now
	* idl/: removed old .idl files

1999-04-28  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* bonobo/gnome-object-client.c
	(gnome_object_activate_with_goad_id): Small fix.

	* bonobo/gnome-client-site.c (gnome_client_site_bind_component):
	Adapt to new GnomeObjectClient existance.

	Added documentation.

	* bonobo/test-container.c: ditto.

	* bonobo/gnome-object-client.c (set_remote_window): New file.
	Includes all the client-side implementation of a remote
	GNOME::object. 

1999-04-27  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* bonobo/test-container.c,sample-server.c,
	components/image-x-png/bonobo-image-x-png:  Simplify by using the
	gnome-bonobo.h header file.

	* bonobo/gnome-stream-memory.c (mem_read): Typo fix.  And use the
	auto-release feature for sequences from Elliot.

	* bonobo/gnome-stream-fs.c (fs_read): Use the auto-release feature
	here.  Thanks to Elliot for pointing this out.

1999-04-26  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* idl/gnome-storage.idl: Use sequences of octets, not strings for
	the buffers. 

	* bonobo/test-container.c: Improved to have a sample call to
	PersistStream_load
	
	* bonobo/gnome-stream-fs.c (fs_read): Implement this function

	* bonobo/gnome-stream-memory.c (mem_read): Use
	CORBA_octet_allocbuf here instead of malloc.

	* bonobo/gnome-stream-fs.c (gnome_stream_fs_get_type): List the
	class initialization routine.

	* bonobo/gnome-persist-stream.c (gnome_persist_stream_new): Do not
	use const for the streams.

	* components/image-x-png/bonobo-image-x-png.c (stream_read):
	Implement using CORBA streams instead of the hardcoded values. 

1999-04-24  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* bonobo/gnome-component.c (gnome_component_class_init): Register
	the "do_verb" and "host_name_changed" signals.  
	(impl_GNOME_Component_do_verb): Implement it.

1999-04-23  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* bonobo/gnome-object.h: Jesus.  I am a dork.  These should be
	externs.  Thanks to Robert Roebling for pointing this out.

1999-04-22  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* bonobo/gnome-stream-memory.c: New memory-based stream object.

	* bonobo/gnome-stream-fs.c (gnome_stream_fs_get_type): Use the
	correct class name here.

1999-04-21  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* components/image-x-png: It loads PNG files now, draws them,
	works.  Hardcoded value currently.  Will fix in a second.
	
	* bonobo/gnome-object.c (gnome_object_activate_with_goad_id):
	Implement activation by goad-id.

	* bonobo/test-container.c (main): Argument line allows you to
	specify the goad id to activate.
	(launch_server): Activate by goad id instead of repo id.

	* bonobo/gnome-persist-stream.c (gnome_persist_stream_new): Finish
	implementing. 

1999-04-21  Havoc Pennington  <hp@pobox.com>

	* bonobo/gnome-client-site.h
	bonobo/gnome-component-factory.h
	bonobo/gnome-component.h
	bonobo/gnome-container.h
	bonobo/gnome-dot.h
	bonobo/gnome-inplace-component.h
	bonobo/gnome-inplace-site.h
	bonobo/gnome-object.h
	bonobo/gnome-view.h
	bonobo/gtk-interfaces.h:
	Match BEGIN_GNOME_DECLS with END_GNOME_DECLS in these
	headers.

1999-04-16  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* bonobo/gnome-component.c (gnome_component_new_view): Use a
	GtkCover on top of the Socket.

	* bonobo/gtk-cover.c (gtk_cover_get_type): New file.  An InputOnly
	window used to cover embedded objects. 

1999-04-14  Tomislav Vujec  <tvujec@carnet.hr>

	* configure.in: remove second GNOME_INIT invocation.

	* bonobo/Makefile.am: $(includedir) should be on the end, because in
	$(srcdir) != $(builddir) scenario, bonobo picks up old headers from
	$(includedir)

1999-04-13  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* bonobo/gnome-object.c: #include "gtk-interfaces.h"

	* bonobo/gnome-file-moniker.c (gnome_file_moniker_new): Declare
	gfm_corba as "GNOME_Moniker gfm_corba", not "GNOME_Moniker *gfm_corba".

	* bonobo/gnome-client-site.c (impl_GNOME_client_site_save_object):
	Made static.

1999-04-11  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* bonobo/gnome-client-site.c (gnome_client_site_destroy): Unref
	the remote object here.
	(gnome_client_site_bind_component): Keep track of the remote
	object here. 

1999-04-07  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* bonobo/gnome-stream.c: Base class for stream implementations.
	
	* bonobo/gnome-storage-fs.c: Implemented sample file-system based
	storage. 

	* bonobo/gtk-interfaces.c (gtk_object_query_interface): Do the
	query interface on the hierarchy.

1999-03-31  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* bonobo/gnome-view.c: Use the new corba-class init framework.

1999-04-05  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* bonobo/gnome-object.c (impl_GNOME_object_query_interface): Make
	gnome_object_query_interface call gtk_object_query_interface.  We
	need to make gtk_object_query_interface walk the hierarchy
	optionally (ie, to ask for parent classes).  

	This fixes the first part of the problem.  Need to fix the next later.

1999-04-01  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* bonobo/gnome-file-moniker.c, bonobo/gnome-moniker.c: Initial
	implementations. 

1999-03-17  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* bonobo/gnome-bind-context.c: New file. 

1999-03-26  Timur Bakeyev <mc@bat.ru>

	* bonobo/Makefile.am: fixed library inclusion order in $(bonobo_libs).

1999-03-08  Martijn van Beers <martijn@earthling.net>

	* bonobo/Makefile.am: fixed double -I for orbit-idl
	* po/.cvsignore:
	* idl/.cvsignore: New files

1999-03-07  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* bonobo/gnome-inplace-site.c (init_inplace_corba_class): New file.

1999-02-16  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* bonobo/gnome-component.c: New file.  Implements a component.

	* bonobo/gnome-view.c (create_gnome_view): Simplify.
	(gnome_view_construct): New function.

	* bonobo/gnome-object.c (gnome_object_activate_servant): New
	function. 

	* bonobo/gnome-container.c: Implement.

1999-02-06  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* src/gnome-object.c (gnome_object_drop_binding,
	gnome_object_drop_binding_by_servant): New routines to drop the
	bindings by servant and by object.

	* src/gnome-main.c (bonobo_init): Bootstrap routine, plus helper
	routines. 

	* src/gnome-object.h: Provide an environment here.

1999-02-08  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* src/gtk-interfaces.c (gtk_get_interface): Apply the mixins patch
	from Tero.

1999-02-04  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* src/gtk-interfaces.c, src/gtk-interfaces.h: New files.
	Implements gtk-interfaces.
	(gtk_get_interface): Use destroy, not shutdown.

