1999-07-06  Elliot Lee  <sopwith@redhat.com>

	* configure.in: s/gnome-object/gnome-unknown/

1999-07-05  Miguel de Icaza  <miguel@gnu.org>

	* components/image-x-png/bonobo-image-x-png.c: Make it use
	GNOME::Unknown as well.
	* components/text-plain/bonobo-text-plain.c (bonobo_object_factory): ditto.

	* idl/*, src/*: Changed from GNOME::obj to GNOME::Unknown. 

1999-06-28  Nat Friedman  <nat@gnome-support.com>

	* idl/gnome-ui-handler.idl (GNOME::UIHandler): Added object method
 	prototypes.

	* bonobo/gnome-ui-handler.h: Added sensitivity and hidden fields
 	to the GnomeUIHandlerMenuItem.  Changed return value of a bunch of
 	functions to void.

1999-06-26  Nat Friedman  <nat@gnome-support.com>

	* bonobo/gnome-view.h: Include bonobo/gnome-view-frame.h.
	(GnomeView): Added a field to store the GNOME_ViewFrame for this
 	View.

	* bonobo/gnome-component.c (impl_GNOME_BonoboObject_new_view):
 	Save a handle to the ViewFrame.

1999-06-26  Jaka Mocnik  <jaka.mocnik@kiss.uni-lj.si>

	bonobo/test-container-autoload.c (application_new): set default
	size and resizing policy (makes it behave better with ps component).

1999-06-26  Matt Loper  <matt@gnome-support.com>

	* bonobo/gnome-persist-file.h: new file.

	* bonobo/gnome-persist-file.c: new file.

1999-06-23  Matt Loper  <matt@gnome-support.com>

	* bonobo/test-container-autoload.c
	(add_object_to_container): Add buttons for each containee, which
	correspond to loading and destruction of that containee. Also
	renamed.
	(gnome_object_has_interface): new function.
	(destroy_embedded_object_cb): new function.  
	(cancel_hydrating_object_from_file_cb): new function.
	(hydrate_object_from_file_cb): renamed.
	(create_persist_file_dialog_cb): renamed.
	Commenting.

1999-06-22  Tomas Ogren  <stric@ing.umu.se>

	* configure.in: Added 'sv' to ALL_LINGUAS

1999-06-22  Nat Friedman  <nat@gnome-support.com>

	* idl/gnome-component.idl (GNOME): Moved do_verb to the View.
  	Prefixed all standard bonobo verbs with "bonobo_".
	(GNOME::ViewFrame): Added the view_activated method.
	(GNOME): Fixed a typo in the get_verb_list comment.

	* components/text-plain/bonobo-text-plain.c (view_data_t): Keep
 	track of our View and ViewFrame, and the internal widgets we will
 	need to unref when the View is destroyed.
	(destroy_view): Unref the widgets we're done with and unref our
 	ViewFrame object.
	(bonobo_object_destroy_cb): New function to handle destroying the
 	BonoboObject and all its views.
	(verb_struct): Simple structure to pair verb names with their
 	functions.
	(view_do_verb_cb): This is the do_verb signal handler.  It
 	dispatches to the appropriate verb handling function.
	(verb_bonobo_activate): New function to handle activation.  All it
 	does is tell the container's ViewFrame that we're active.  The
 	ViewFrame will then uncover us so that we can receive X events.
	(view_factory): CORBA_Object_duplicate the ViewFrame interface so
 	that we can hang onto it.  Also save the widgets we need to unref
 	later.
	(create_menu_string): Takes a list of GnomeUIInfos and creates a
 	menu string.  Ignore all this menu stuff for now; it will all
 	change soon.
	(bonobo_object_factory): Connect to the destroy signal for the
 	BonoboObject.  Build a verb list.

	* components/image-x-png/bonobo-image-x-png.c (view_factory): Take
 	the view frame as a parameter.

	* bonobo/test-container.c (view_frame_activated_cb): New function
 	to handle the view_activated signal on the ViewFrame.
	(add_view): Use gnome_bonobo_object_client_new_view_simple now,
 	since it sets up the verb handler for BonoboObject activation.
  	Removed the call to gnome_bonobo_object_client_activate, since we
 	can now do activation properly.

	* bonobo/test-container-autoload.c (add_object_cmd): Use
 	gnome_bonobo_object_client_new_view, since
 	gnome_bonobo_object_new_view changed names.

	* bonobo/sample-server.c (view_factory): Take the ViewFrame as an
 	argument.

	* bonobo/gnome-wrapper.c (gnome_wrapper_realize): Added
 	GDK_BUTTON_PRESS_MASK to the event mask for the wrapper.

	* bonobo/gnome-view.c: Added a DO_VERB signal, since do_verb was
 	moved from the GNOME::BonoboObject to the GNOME::View.
	(gnome_view_construct): Added precondition that corba_view isn't
 	CORBA_OBJECT_NIL.
	(init_view_corba_class): Add do_verb to the epv.
	(gnome_view_class_init): Create a do_verb signal.
	(impl_GNOME_View_do_verb): New function to handle do_verb.

	* bonobo/gnome-view.h: Added do_verb to the GnomeViewClass.

	* bonobo/gnome-simple-source.c
 	(gnome_simple_data_source_construct): Added precondition that
 	corba_ssource isn't CORBA_OBJECT_NIL.

	* bonobo/gnome-progressive.c
 	(gnome_progressive_data_sink_construct): Added precondition that
 	corba_psink isn't CORBA_OBJECT_NIL.

	* bonobo/gnome-persist.c (gnome_persist_construct): Added
 	precondition that corba_persist isn't CORBA_OBJECT_NIL.

	* bonobo/gnome-persist-stream.c (gnome_persist_stream_construct):
 	Added precondition that corba_ps isn't CORBA_OBJECT_NIL.

	* bonobo/gnome-inplace-site.c (gnome_inplace_site_construct):
 	Added preconditions where none were.

	* bonobo/gnome-file-moniker.c (gnome_file_moniker_construct):
 	Added precondition that gfm_corba isn't CORBA_OBJECT_NIL.

	* bonobo/gnome-component.c (enum): Removed DO_VERB.
	(impl_GNOME_BonoboObject_do_verb): Removed.
	(impl_GNOME_BonoboObject_new_view): Now takes a GNOME::ViewFrame
 	as a parameter and passes it to the view factory.
	(gnome_bonobo_object_epv): Removed do_verb.
	(gnome_bonobo_object_class_init): Removed DO_VERB signal.

	* bonobo/gnome-component.h: Removed do_verb signal handler pointer
 	from GnomeBonoboObjectClass.  Updated prototypes to reflect the
 	changes described above.

	* bonobo/gnome-component-client.c
 	(gnome_bonobo_object_client_new_view): Renamed from
 	gnome_bonobo_object_new_view, since it is not a method on a
 	GNOME::BonoboObject, but a helper function that the client uses.
	(gnome_bonobo_object_client_new_view_simple): Likewise.
	(gnome_bonobo_object_client_get_verbs): Likewise.
	(gnome_bonobo_object_client_free_verbs): Likewise.
	(gnome_view_client_do_verb): Likewise.
	(gnome_bonobo_object_client_new_view_simple): Connect to the
 	button_pres_event on the ViewFrame, not the server object.
	(gnome_view_client_do_verb): Now acts on a View, not a
 	BonoboObject.
	(wrapper_button_press_cb): Activate the view corresponding to this
 	wrapper when we get a double click.

	* bonobo/gnome-component-client.h: Include bonobo/gnome-view.h.
  	Updated function prototypes to reflect changes described above.

1999-06-22  Matt Loper  <matt@gnome-support.com>

	* bonobo/gnome-component-factory.c: Rename BonoboObjectFactory to
	ComponentFactory, and make it useful to _anyone_ that wants
	convenience functions for implementing/exposing a factory that
	creates components.
	(gnome_component_factory_new_bonobo_object): Removed `name', as
	there's no use for create_path anymore.

	* bonobo/gnome-component-factory.h: likewise. Remove path from
	GnomeComponentFactoryFn.

	* bonobo/sample-server.c (bonobo_object_factory): Changed to
	return a GnomeObject.
	(init_server_factory): Changed to make a GnomeComponentFactory.

	* components/text-plain/bonobo-text-plain.c
	(bonobo_object_factory): Return GnomeObject.
	(init_bonobo_text_plain_factory): Call
	gnome_component_factory_new, as per name change.

	* components/image-x-png/bonobo-image-x-png.c
	(bonobo_object_factory): Return GnomeObject.
	(init_bonobo_image_x_png_factory): Call
	gnome_component_factory_new, as per name change.

	* components/audio-ulaw/bonobo-audio-ulaw.c (component_factory):
	No need for path. Return GnomeObject.
	(init_bonobo_audio_ulaw_factory): call
	gnome_component_factory_new, as per name change.	

	* bonobo/gnome-dot.h: old file removed.
	
1999-06-14  Jaka Mocnik  <jaka.mocnik@kiss.uni-lj.si>

	* bonobo/bonobo-stream-fs.c (fs_copy_to): implemented.
	(gnome_stream_fs_open): always g_free(full).

1999-06-13  Jacob Berkman  <jberkman@andrew.cmu.edu>

	* doc/Bonobo.sgml: fixed typo ("funtion") in ref()/unref() section

1999-06-12  Miguel de Icaza  <miguel@gnu.org>

	* bonobo/gnome-component.c
	(impl_GNOME_BonoboObject_set_client_site): Duplicate reference here.
	(impl_GNOME_BonoboObject_get_client_site): Duplicate return value
	here. 
	(impl_GNOME_BonoboObject_new_view): Duplicate return value here.

	* bonobo/gnome-object.c (gnome_object_construct): Duplicate the
	CORBA_Object_duplicate at construction time.
	(gnome_object_activate_servant): Do not duplicate the object
	here, this addresses the concerns I had.

	Added in-line api documentation for the whole file.

	* doc/Bonobo.sgml: Extended the Bonobo documentation a bit with
	more information on query_interface.

1999-06-11  Matt Loper  <matt@gnome-support.com>

	* bonobo/gnome-file-moniker.c (map_file): helper function. Is
	there already a function to do this?

	* bonobo/gnome-moniker.h: Add find_moniker_in_naming_service.

	* bonobo/gnome-moniker.c (find_moniker_in_naming_service): New function.

	* bonobo/gnome-moniker.c (impl_bind_to_object): Changed it to take
	a GNOME_BindOptions* struct instead of a BindContext CORBA object.
	(impl_bind_to_storage): same.
	(impl_get_display_name): same.
	(impl_parse_display_name): same.

	* bonobo/gnome-moniker.h: Changed GnomeMonikerBindFn to take a
	GNOME_BindOptions struct.

	* idl/gnome-moniker.idl: Added BindOptions struct, which is
	analogous to GNOME::BindContext. I don't think we'll need the
	CORBA object form of BindContext; we'll see. . .

	* bonobo/gnome-file-moniker.c (gnome_file_moniker_bind): New
	function, which acts as the filemoniker-specific binding function.
	(gnome_file_moniker_construct): Give gnome_file_moniker_bind to
	gnome_moniker_construct.

1999-06-10  Matt Loper  <matt@gnome-support.com>

	* bonobo/gnome-file-moniker.h: Change gnome_file_moniker_new to
	take filename and goad_id as params.  Changed
	gnome_file_moniker_construct to take filename and goad_id as
	params.

	* bonobo/gnome-moniker.h: Add a GnomeMonikerBindFn type to
	GnomeMoniker. Include gnorba.h. Add binding_function to
	gnome_moniker_construct.

	* bonobo/gnome-moniker.c (gnome_moniker_construct): Initialize a
	GnomeMoniker's bind_function here.

	* bonobo/gnome-file-moniker.c (gnome_file_moniker_new): Changed
	signature and body to reflect goad_id/filename basis for
	GnomeFileMoniker.
	(gnome_file_moniker_construct): Changed to reflect
	goad_id/filename basis for GnomeFileMoniker

	* bonobo/gnome-file-moniker.h: changed GnomeFileMoniker to be
	defined in terms of a goad_id and a filename.

	* bonobo/gnome-file-moniker.c (gnome_file_moniker_destroy):
	Changed to reflect the above.

1999-06-10  Nat Friedman  <nat@gnome-support.com>

	* bonobo/test-container.c: Added comment at top of file.

	* bonobo/sample-server.c (main): Return an int.

	* bonobo/gnome-component-client.c: Include gdktypes.h
	(view_frame_activated_cb): New simple default callback function to
 	attach to the view_activated signal of a newly-created
 	GnomeViewFrame.  Uncovers the BonoboObject by removing the
 	GnomeWrapper.  For use with gnome_bonobo_object_new_view_simple.
	(wrapper_button_press_cb): New simple default callback function to
 	attach to the button_press_event signal of a GnomeWrapper.  Sends
 	the bonobo_open verb to the contained BonoboObject when the user
 	double clicks on the GnomeWrapper.  For use with
 	gnome_bonobo_object_new_view_simple.
	(gnome_bonobo_object_new_view_simple): New function to make it
 	easy to setup a new view of an existing BonoboObject.

1999-06-09  Matt Loper <matt@gnome-support.com>

	* bonobo/test-container.c (add_image_cmd): Released `persist' properly.
	(add_text_cmd): likewise.

	* bonobo/test-container-autoload.c: Include
	bonobo/gnome-stream-fs.h rather than a local version.
	(hydrate_object_from_file): Release `persist' properly. Also some
	minor commenting.

1999-06-08  Nat Friedman  <nat@gnome-support.com>

	* idl/gnome-component.idl (ViewFrame): Added the GNOME::ViewFrame interface.
	(BonoboObject): Added the ViewFrame argument to new_view.

	* idl/gnome-client-site.idl (show_window): No longer oneway.

	* components/text-plain/bonobo-text-plain.c: Added
	progressive_data field to the BonoboObject private data structure
	to keep track of whether or not the component is in the process of
	receiving data view the ProgressiveDataSink.
	(progressive_start): Set bonobo_object_data->progressive_data to TRUE.
	(progressive_end): Set bonobo_object_data->progressive_data to FALSE.
	(view_factory): Only hide the progress meter if we're not
	receiving progressive data.

	* bonobo/test-container.c (text_client_site): New global variable
	to cache the client site associated with the text_obj
	BonoboObject.
	(image_client_site): Ditto for image_png_obj.
	(launch_server): Take the GnomeClientSite as a paramter.
	(add_view): Take the GnomeClientSite as an argument so it can be
	passed to gnome_bonobo_object_new_view.  Get the GnomeWrapper from
	the ViewFrame.  Return the ViewFrame, not the wrapper.
	(add_cmd): Create the client site and return it in a new
	parameter.  Pass it to add_view.
	(add_demo_cmd): Pass &client_site to add_cmd.
	(add_image_cmd): Pass &image_client_site to add_cmd.
	(add_image_view): Pass image_client_site to add_view.
	(add_text_cmd): Pass &text_client_site to add_cmd.
	(add_text_view): Pass text_client_site to add_view.

	* bonobo/test-container-autoload.c (launch_server): Added a
	client_site parameter.  Don't create the client_site here.
	(add_object_cmd): Create the client site here and pass it to
	launch_server.  Pass the client site to
	gnome_bonobo_object_new_view .  Get the view_widget from the
	view_frame that new_view returned.

	* bonobo/gnome-object-client.h: Changed views list to view_frames.

	* bonobo/gnome-component-client.h: Include gnome-client-site.h and
	gnome-view-frame.h.
	(gnome_bonobo_object_new_view): Changed prototype to have
	client_site argument.

	* bonobo/gnome-component-client.c (destroy_view_frame): Thre
	destroy_view function was renamed to this.  Remove the specified
	ViewFrame from the GnomeClientSite's ViewFrame list.
	(gnome_bonobo_object_client_activate): Get the wrapper from the
	ViewFrame list.
	(gnome_bonobo_object_client_deactivate): Likewise.

	(gnome_bonobo_object_new_view): Take the GnomeClientSite as an
	argument.  Create the view frame for the new view and return it.
	Associate the view and the view frame with the cover.

	* bonobo/Makefile.am (libbonobo_la_SOURCES): Added gnome-view-frame.c
	(libbonoboinclude_HEADERS): Added gnome-view-frame.h

1999-06-08  Miguel de Icaza  <miguel@gnu.org>

	* bonobo/gnome-view.c (gnome_view_class_init): Parent is
	GNOME::obj, not GtkObject.
	
	* bonobo/gnome-container.c (gnome_container_class_init): ditto.
	* bonobo/gnome-component-factory.c (gnome_bonobo_object_factory_class_init): ditto.
	* bonobo/gnome-bind-context.c (gnome_bind_context_class_init): ditto

1999-06-07  Matt Loper  <matt@gnome-support.com>

	* idl/gnome-persist.idl (GNOME): Added a `WrongDataType' exception
	to the load functions in PersistFile, PersistStorage, and
	PersistStream.

1999-06-06  Nat Friedman  <nat@gnome-support.com>

	* components/text-plain/bonobo-text-plain.c (text_inserted_cb):
 	New function to catch "insert_text" signals on a view.  Adds the
 	new text to all existing views and adds it to BonoboObject's
 	internal data.
	(text_deleted_cb): New function to catch "delete_text" signals on
 	a view.  Deletes the appropriate text from all existing views and
 	removes it from the BonoboObject's internal data.
	(view_factory): Use a table instead of a vbox to store the
 	progress bar and the scrollable window.  Add any existing
 	BonoboObject text into the new view when it is created.  Connect
 	to the "insert_text" and "delete_text" signals.

	* components/image-x-png/bonobo-image-x-png.c (view_factory):
 	Removed call to gtk_widget_set_usize.

	* bonobo/test-container.c (image_png_obj): New global variable to
 	hold a pointer to an existing image/x-png BonoboObject.
	(add_view): New function.  Creates a new view from a
 	BonoboObject's GnomeObjectClient.
	(add_cmd): Modified to use add_view.
	(add_image_cmd): Store a pointer to the new image BonoboObject in
 	image_png_obj.
	(add_image_view): New function to add a new view of an existing
 	image/x-png BonoboObject.
	(add_text_view): New function to add a new view of an existing
 	text/plain BonoboObject.
	(container_text_plain_menu): New menu subtree for all the
 	text/plain operations.
	(container_image_png_menu): New menu subtree for all the
 	image/x-png operations.
	(container_file_menu): Removed image/x-png and text/plain
 	operations.
	(container_main_menu): Added subtree entries for
 	container_text_plain_menu and container_image_png_menu.

	* bonobo/gnome-component.c (gnome_bonobo_object_remove_verb): Cast
 	l->data to a char * in the strcmp to avoid a compiler warning.

1999-06-04  Richard Hestilow  <hestgray@ionet.net>

	* bonobo/gnome-bonobo-selector.h: Use 
	'GnomeBonoboSelectorPrivate *priv" instead of "gpointer priv" so
	as to avoid ugly casting.
	
1999-06-04  Chris Lahey  <clahey@umich.edu>

	* components/audio-ulaw/doc/C/Makefile.am,
	components/image-x-png/doc/C/Makefile.am: Fixed make distcheck.

1999-06-03  Richard Hestilow  <hestgray@ionet.net>
	
	* bonobo/gnome-bonobo-selector.[ch]: Updated to use the new private
	fields - didn't bother leaving compat fields in though, as nothing
	uses this code yet :-)

1999-06-02  Nat Friedman  <nat@gnome-support.com>

	* components/image-x-png/doc/C/image_x_png.sgml: Rewrote the
 	summary.  Changed some of the section titles.

	* components/image-x-png/bonobo-image-x-png.c (save_image): New
 	function implementing GNOME::PersistStream.save.
	(stream_write): New fuhnction.  Helper for save_image.
	(bonobo_object_factory): Setup callback to save_image for
 	GNOME::PersistStream.save.

1999-06-01  Chris Lahey  <clahey@umich.edu>

	* configure.in, components/Makefile.am: Added audio-ulaw subdirectory.

	* components/audio-ulaw/Makefile.am,
	components/audio-ulaw/.cvsignore: Files needed for compilation and cvs.

	* components/audio-ulaw/audio-ulaw.gnorba: Description of this
	component for gnorba to use.

	* components/audio-ulaw/color.h, components/audio-ulaw/color.c:
	These are borrowed almost exactly from gnumeric/src/color.[ch].
	They handle color allocation.

	* components/audio-ulaw/bonobo-audio-ulaw.h,
	components/audio-ulaw/bonobo-audio-ulaw.c: The bonobo component.
	Uses item-audio to display audio/ulaw data.

	* components/audio-ulaw/item-audio.h,
	components/audio-ulaw/item-audio.c: This is the gnome-canvas item
	which displays the audio data.

	* components/audio-ulaw/: Added a audio/ulaw component.

1999-06-01  Nat Friedman  <nat@gnome-support.com>

	* components/text-plain/bonobo-text-plain.c (view_data_t): Added a
 	progress field for the progress bar widget.
	(view_destroy_cb): Renamed destroy_view to this.
	(blank_all_views): Hide the progress bar.
	(progressive_update): Removed the old progress meter code.  Update
 	the new progress bar widget.
	(progressive_start): Show the progress bar.
	(progressive_end): Removed the old progress meter code.  Hide the
 	progress bar widget.
	(view_factory): Create a vbox to hold both the GtkText and the new
 	GtkProgressBar.

	* bonobo/gnome-progressive.h (GnomeProgressiveDataSinkAddDataFn):
 	Made the iobuf const.
	(GnomeProgressiveDataSinkClass): Made the iobuf in the add_data_fn
 	callback's paramter list const.

	* bonobo/gnome-progressive.c (impl_add_data): Made the iobuf
 	parameter const to match the skels.
	(gnome_progressive_data_sink_add_data_nop): Removed the
 	CORBA_Environment parameter.

	* bonobo/gnome-view.c (impl_GNOME_View_set_window): Moved the call
 	to gtk_widget_show_all before the gtk_container_add so that the
 	component can control when its subwidgets are displayed.

	* bonobo/gnome-inplace-site.c (create_inplace_site): Removed
 	unused untyped variable corba_class_inited.

1999-05-31  Nat Friedman  <nat@gnome-support.com>

	* bonobo/test-container.c (timeout_next_line): Call
 	GNOME_ProgressiveDataSink_end when the whole file has been sent.
  	Then free the tmt struct, close the file, and release the
 	interface object.

	* bonobo/test-container.c (send_text_cmd): Stat the file and call
 	GNOME_ProgressiveDataSink_set_size.
	
1999-06-01  Elliot Lee <sopwith@redhat.com>

	* bonobo/gnome-object.[ch]: Removed servant_to_object hash table.
  	Now all servants store a gnome_object pointer for
 	servant->GnomeObject translation.

	* bonobo/*.[ch]: Changes to match above.

1999-06-01  Richard Hestilow  <hestgray@ionet.net>

	* bonobo/gnome-bonobo-selector.[ch]: New widget, a dialog
	that prompts the user to select from a filtered list of goad servers.

	* bonobo/selector_test.c: Test program for aforementioned widget
	
	* bonobo/Makefile.am: added new sources, test program

1999-06-01  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* bonobo/gnome-object.c: Removed object_to_servant hash table.
	Now the GnomeObject contains a pointer to the servant.

1999-05-31  Nat Friedman  <nat@gnome-support.com>

	* components/text-plain/bonobo-text-plain.c (SHOW_PROGRESS_INFO):
 	Define this for kicks.
	(bonobo_object_data_t): Added total_size field.
	(progressive_set_size): New function.
	(progressive_end): Likewise.
	(bonobo_object_factory): Hook up the callbacks for progressive_end
 	and progressive_set_size.
	(progressive_update): Update the progress meter.

1999-05-31  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* bonobo/gnome-component-client.c (gnome_bonobo_object_get_verbs):
	Helper routine to fetch the verbs supported by an embedded
	BonoboObject.
	(gnome_bonobo_object_free_verbs): Routine to release the return
	value returned from gnome_bonobo_object_get_verbs.

	* idl/gnome-component.idl (BonoboObject): Verbs are now only
	strings.  No code is now passed.
	
	* bonobo/gnome-component.c (gnome_bonobo_object_remove_verb,
	gnome_bonobo_object_add_verb, gnome_bonobo_object_add_verbs):
	Change the API to only use strings.

	* bonobo.spec.in (Obsoletes): Include *Conf.sh files in distribution.

	* bonobo/Makefile.am (EXTRA_DIST): Include corba_DATA in
	distirbution. 

1999-05-30  Matt Loper  <matt@gnome-support.com>

	* idl/gnome-component.idl (GNOME): Changed the GNOME::Component
	interface to GNOME::BonoboObject. This implies changes in all of
	the following files.

	* idl/gnome-persist.idl (GNOME): likewise

	* idl/gnome-inplace.idl (GNOME): likewise

	* components/text-plain/text-plain.gnorba: likewise

	* components/text-plain/bonobo-text-plain.c: likewise

	* components/image-x-png/image-x-png.gnorba: likewise

	* components/image-x-png/bonobo-image-x-png.c: likewise

	* bonobo/test-container.c: likewise

	* bonobo/test-container-autoload.c: likewise 

	* bonobo/sample.gnorba: likewise

	* bonobo/sample-server.c: likewise

	* bonobo/gnome-object.c: likewise

	* bonobo/gnome-inplace-component.c: likewise

	* bonobo/gnome-container.c: likewise.

	* bonobo/gnome-component.h: likewise

	* bonobo/gnome-component.c: likewise

	* bonobo/gnome-component-io.h: likewise

	* bonobo/gnome-component-io.c: likewise

	* bonobo/gnome-component-factory.h: likewise

	* bonobo/gnome-component-factory.c: likewise

	* bonobo/gnome-component-client.h: likewise

	* bonobo/gnome-component-client.c: likewise

	* bonobo/gnome-client-site.h: likewise

	* bonobo/gnome-client-site.c:likewise

1999-05-29  Nat Friedman  <nat@gnome-support.com>

	* components/text-plain/bonobo-text-plain.c (view_factory): Put
	the GtkText widget in a scrolled window.

1999-05-28  Nat Friedman  <nat@gnome-support.com>

	* components/text-plain/bonobo-text-plain.c
	(progressive_add_data): Removed the call to
	GNOME_SimpleDataSource_pop_data.  Now just use the buffer that
	comes from add_data.

	* bonobo/test-container.c (struct progressive_timeout): Now stores
	much less information since we don't need to manage a
	SimpleDataSource.  It now only stores the file we're loading data
	from and the GNOME_ProgressiveDataSinik.
	(ssource_pop_data): Removed, since we're no longer using the
	SimpleDataSource.
	(ssource_remaining_data): Likewise.
	(timeout_next_line): Modified to just send a buffer with add_buff.
	(send_text_cmd): No longer creates a SimpleDataSource interface
	object.

	* bonobo/gnome-progressive.h (GnomeProgressiveDataSinkAddDataFn):
	Modified to reflect the change in the interface to add_data.
	(GnomeProgressiveDataClass): Likewise.

	* bonobo/gnome-progressive.c (impl_add_data): Modified to reflect
	the change in the interface to add_data, which only takes one
	argument now.
	(gnome_progressive_data_sink_add_data_nop): Likewise.

	* bonobo/gnome-bonobo.h: Don't include gnome-simple-source.h

	* idl/gnome-progressive.idl: Removed SimpleDataSource interface.

	* bonobo/Makefile.am: Removed gnome-simple-source.c and
	gnome-simple-source.h

1999-05-28  Raja R Harinath  <harinath@cs.umn.edu>

	* configure.in (AC_OUTPUT): Remove 'sed .. POTFILES' expression.
	(AM_GNOME_GETTEXT): Use instead of AM_GNU_GETTEXT.
	(BONOBO_INCLUDEDIR): Use $GNOME_CONFIG instead of calling
	gnome-config directly.
	(BONOBO_LIBS): Likewise.

	* bonobo/Makefile.am (idl_flags): Use $(GNOME_CONFIG) instead of
	calling `gnome-config' directly.
	($(CORBA_SOURCE)): Use $(ORBIT_IDL) instead of calling `orbit-idl'
	directly. 

	* components/text-plain/Makefile.am (bonobo_text_plain_LDADD): 
	Use $(top_builddir) not $(top_srcdir).
	* components/image-x-png/Makefile.am (bonobo_image_x_png_LDADD): 
	Likewise.
	
1999-05-28  Nat Friedman  <nat@gnome-support.com>

	* Makefile.am (SUBDIRS): Added components.

	* bonobo/gnome-simple-source.c: New file which implements the
	GNOME::SimpleDataSource interface.
	* bonobo/gnome-simple-source.h: New file.

	* bonobo/gnome-progressive.c: New file which implements the
	GNOME::ProgressiveDataSink interface.
	* bonobo/gnome-progressive.h: New file.

	* idl/gnome-progressive.idl: New file which defines the interfaces
	for GNOME::ProgressiveDataSink and GNOME::SimpleDataSource, which
	work together to provide an interface for progressive loading of
	slow data streams to components.

	* idl/gnome-component.idl: Fixed comment.

	* idl/Makefile.am (idl_DATA): Added gnome-progressive.idl.

	* components/text-plain/bonobo-text-plain.c (free_text): Set
	component_data->text to NULL after freeing it.
	(blank_all_views): Don't blank blank views.
	(update_all_views): New function to perform non-progressive
	display updating, as occurs after new data is loaded through the
	PersistStream interface.
	(progressive_update): Renamed progressive_update_all_views to
	this.  It also updates the component data and is modified to take
	a char * buffer and a byte count.
	(stream_read): Don't call CORBA_exception_free, since we have a
	global exception.  Don't progressively update the display as we
	read data; stream_read is only used as a helper function for the
	PersistStream interface now.  Return -1 on error and 0 on success.
	(pstream_load): Renamed load_text_from_stream to this.  Modified
	to only update the display after the entire stream has been
	loaded.
	(pstream_save): New function to implement
	GNOME::PersistStream:save.
	(progressive_start): New function to implement
	GNOME::ProgressiveDataSink:start.
	(progressive_add_data): New function to implement
	GNOME::ProgressiveDataSink:add_data.
	(component_factory): Add the GNOME::ProgressiveDataSink interface.

	* bonobo/test-container.c: Added struct progressive_timeout to
	hold the closure data that needs to be sent to the timeout.
	(ssource_pop_data): New function.  Implements the
	GNOME::SimpleDataSource:pop_data method for progressive loading.
	(timeout_next_line): New function.  Timeout callback to send new
	data to the text/plain BonoboObject using the ProgressiveDataSink
	interface.
	(send_text_cmd): Modified to use ProgressiveDataSink.
	(container_file_menu): New accelerators.
	(ssource_remaining_data): New function to implement the
	GNOME::SimpleDataSource:remaining_data method.

	* bonobo/gnome-persist-stream.h: Added get_size_max_fn to
	GnomePersistStream.

	* bonobo/gnome-persist-stream.c (impl_get_size_max): Try to call
	the user-provided get_size_max function if it is available.

	* bonobo/gnome-bonobo.h: Include gnome-stream.h,
	gnome-stream-fs.h, gnome-progressive.h and gnome-simple-source.h

	* bonobo/Makefile.am (libbonobo_la_SOURCES): Added
	gnome-progressive.c and gnome-simple-source.c.
	(libbonobo_la_SOURCES): Added gnome-progressive.h and
	gnome-simple-source.h

	* bonobo/Makefile.am (idls): Added gnome-progresive.idl to idls
	list.

1999-05-28  Matt Loper  <matt@gnome-support.com>

	* bonobo/test-container-autoload.c: New file.

1999-05-27  Jacob Berkman  <jberkman@andrew.cmu.edu>

	* doc/.cvsignore: added file

	* bonobo/test-container.c (main): fix compiler warnings
	(should bonobo.h include gnome-stream-fs.h? 
	if so: remove #include <bonobo/gnome-stream-fs.h> from here)
	
1999-05-24  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* bonobo/gnome-storage-repo.c (gnome_storage_repo_class_init):
	Method rename from delete to erase to deal with C++.

	* bonobo/gnome-storage.c (init_storage_corba_class): ditto

	* idl/gnome-storage.idl: ditto.

1999-05-27  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* bonobo/gnome-component.c (gnome_component_remove_verb): Add
	routines for registering and unregistering verbs. 

	* bonobo/gnome-container.c (corba_container_class_init): Use corba
	init class mechanism instead of online initialization.

	* bonobo/gnome-view.c (impl_GNOME_View_size_allocate): Pass the
	size on the component to the actual widget.

	* bonobo/gnome-component-client.c (size_allocate): Propagage size
	changes to the client.

1999-05-27  Jacob Berkman  <jberkman@andrew.cmu.edu>

	* idl/gnome-component.idl: change a "Baboon" -> "Bonobo"

1999-05-27  Michael Meeks  <michael@imaginator.com>

	* idl/gnome-persist.idl: Polish docs.

	* idl/gnome-inplace.idl: typo.

1999-05-26  Jacob Berkman  <jberkman@andrew.cmu.edu>

	* components/text-plain/.cvsignore: added file

	* doc/Bonobo.sgml: changed some GNOME::object -> GNOME::obj

	* bonoboConf.sh.in: typo: XML -> Bonobo

1999-05-26  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* idl/Makefile.am (idl_DATA): Removed gnome-base.idl and
	gnome-object.idl from the list of files.

	* bonobo/Makefile.am (idls): Likewise.

1999-05-26    <sopwith@moebius.labs.redhat.com>

	* idl/bonobo.idl: Use GnomeObject.idl (from gnome-libs) instead of
	gnome-object.idl and gnome-base.idl

1999-05-26  Nat Friedman  <nat@nat.org>

	* components/text-plain/bonobo-text-plain.c (blank_all_views): New
 	function.
	(progressive_update_all_views): New function.
	(stream_read): Update the display as the data comes in.
	(load_text_from_stream): Updated to use the progressive display.
	(component_factory): No default text.
	(view_factory): No default text.

	* bonobo/test-container.c (add_text_cmd): Load /usr/dict/words.
	(text_obj): New variable.
	(send_text_cmd): New callback to send /tmp/pipe to the current
	text component.  To show off progressive loading.
	(container_file_menu): Added a menu entry for send_text_cmd.

1999-05-26  Nat Friedman  <nat@nat.org>

	* components/image-x-png/bonobo-image-x-png.c (view_factory): Add
 	the new view to the component_data's view list.

	* bonobo/test-container.c (add_text_cmd): New function to embed a
 	text/plain component.
	(container_file_menu): Added a menu item to embed a text/plain
 	component.

	* configure.in: Added components/text-plain/Makefile to the build
 	list.

	* components/text-plain/text-plain.gnorba (location_info): New file.

	* components/text-plain/Makefile.am: New file.

	* components/text-plain/bonobo-text-plain.c: New component to
 	implement the text/plain display component.

1999-05-25  Nat Friedman  <nat@nat.org>

	* components/image-x-png/image-x-png.gnorba (location_info):
 	Changed the description to "image/x-png component factory" for the
 	component-factory:image-x-png entry.
 
	* bonobo/test-container.c (add_cmd): Removed unused 'socket'
 	variable.  This stuff is handled in gnome-component-client.c these
 	days anyway.
	(add_cmd): Added call to gnome_component_client_activate.
	(add_image_cmd): Display a warning if the component can't be
 	added.
	(container_file_menu): Use the GNOMEUIINFO_MENU_EXIT_ITEM macro.

	* bonobo/gnome-component.c (gnome_component_class_init): Inherit
 	from GnomeObject, not GtkObject.
	(gnome_component_class_init): Added missing call to
 	gtk_object_class_add_signals.  Verbs now work.

	* bonobo/gnome-component-client.h: Added prototypes for
 	gnome_component_client_activate and
 	gnome_component_client_deactivate.

	* bonobo/gnome-component-client.c (gnome_component_new_view):
 	Don't call gtk_container_add on the socket twice.
	(gnome_component_client_deactivate): Renamed
 	gnome_object_client_deactivate to
 	gnome_component_client_deactivate.
	(gnome_component_client_activate): Renamed
 	gnome_object_client_activate to
 	gnome_component_client_activate.

1999-05-25  Havoc Pennington  <hp@pobox.com>

	* bonobo/gnome-component.c (impl_GNOME_Component_do_verb): Cast
	the varargs arguments to be sure they're the right size

	* bonobo/gnome-storage.h, bonobo/gnome-storage.c,
	idl/gnome-storage.idl:
	s/delete/erase (fixes from LE)

1999-05-18  Dietmar Maurer  <dm@vlsivie.tuwien.ac.at>

	* idl/gnome-storage.idl (interface Stream):
 	added new functions close, eos, length. seek now returns the 
	current position.
	* idl/gnome-storage.idl (interface Storage):
	renamed destory to delete 
	
1999-05-16  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* idl/gnome-object.idl, idl/*.idl: Renamed GNOME::object to
	GNOME::obj to make it complain to the CORBA standard (they do not
	let use use object in any case-sensitive fashion).

	* bonobo/gtk-interfaces.c: Simplified the code, cleaned up, and
	address the bug pointed out by Jacob: interfaces were not being
	propagated to all of the conforming objects, only to the last 2
	objects being assembled.

	* bonobo/object_test.c (test2): Extended interfaces tests to cover
	the bug found by Jacob.

	* bonobo/gtk-interfaces.c (gtk_object_query_interface): Use
	gtk_get_interface here, so that we can do query (A, A) and get A.
	Thanks to Dietmar for pointing this out.

1999-05-10  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* bonobo/gnome-storage-fs.c (gnome_storage_fs_get_type): use
	initialization class.

1999-05-14  Dietmar Maurer  <dm@vlsivie.tuwien.ac.at>

	* bonobo/gnome-stream-fs.c (fs_write): small fix 
	(gnome_stream_fs_create): added O_RDWR to open flags
	* bonobo/gnome-storage-fs.c 
	(gnome_storage_fs_create): small fix 
	* bonobo/gnome-storage-repo.[hc]: new files (librepo interface) 
	* bonobo/gnome-stream-repo.[hc]: new files (librepo interface)

1999-05-12  Dietmar Maurer  <dm@vlsivie.tuwien.ac.at>

	* bonobo/gnome-storage.[hc]: added destroy function
	
1999-05-11  Dietmar Maurer  <dm@vlsivie.tuwien.ac.at>

	* bonobo/gnome-storage.c (impl_*): don't access storage->object
	if object == NULL.
	
1999-04-28  Jacob Berkman  <jberk+@cmu.edu>

	* idl/Makefile.am (idl_DATA): install the .idl files in
	$(datadir)/idl

1999-04-28  Jacob Berkman  <jberk+@cmu.edu>

	* idl/Makefile.am (idl_files): install gnome-*.idl files now
	* idl/: removed old .idl files

1999-04-28  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* bonobo/gnome-object-client.c
	(gnome_object_activate_with_goad_id): Small fix.

	* bonobo/gnome-client-site.c (gnome_client_site_bind_component):
	Adapt to new GnomeObjectClient existance.

	Added documentation.

	* bonobo/test-container.c: ditto.

	* bonobo/gnome-object-client.c (set_remote_window): New file.
	Includes all the client-side implementation of a remote
	GNOME::object. 

1999-04-27  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* bonobo/test-container.c,sample-server.c,
	components/image-x-png/bonobo-image-x-png:  Simplify by using the
	gnome-bonobo.h header file.

	* bonobo/gnome-stream-memory.c (mem_read): Typo fix.  And use the
	auto-release feature for sequences from Elliot.

	* bonobo/gnome-stream-fs.c (fs_read): Use the auto-release feature
	here.  Thanks to Elliot for pointing this out.

1999-04-26  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* idl/gnome-storage.idl: Use sequences of octets, not strings for
	the buffers. 

	* bonobo/test-container.c: Improved to have a sample call to
	PersistStream_load
	
	* bonobo/gnome-stream-fs.c (fs_read): Implement this function

	* bonobo/gnome-stream-memory.c (mem_read): Use
	CORBA_octet_allocbuf here instead of malloc.

	* bonobo/gnome-stream-fs.c (gnome_stream_fs_get_type): List the
	class initialization routine.

	* bonobo/gnome-persist-stream.c (gnome_persist_stream_new): Do not
	use const for the streams.

	* components/image-x-png/bonobo-image-x-png.c (stream_read):
	Implement using CORBA streams instead of the hardcoded values. 

1999-04-24  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* bonobo/gnome-component.c (gnome_component_class_init): Register
	the "do_verb" and "host_name_changed" signals.  
	(impl_GNOME_Component_do_verb): Implement it.

1999-04-23  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* bonobo/gnome-object.h: Jesus.  I am a dork.  These should be
	externs.  Thanks to Robert Roebling for pointing this out.

1999-04-22  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* bonobo/gnome-stream-memory.c: New memory-based stream object.

	* bonobo/gnome-stream-fs.c (gnome_stream_fs_get_type): Use the
	correct class name here.

1999-04-21  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* components/image-x-png: It loads PNG files now, draws them,
	works.  Hardcoded value currently.  Will fix in a second.
	
	* bonobo/gnome-object.c (gnome_object_activate_with_goad_id):
	Implement activation by goad-id.

	* bonobo/test-container.c (main): Argument line allows you to
	specify the goad id to activate.
	(launch_server): Activate by goad id instead of repo id.

	* bonobo/gnome-persist-stream.c (gnome_persist_stream_new): Finish
	implementing. 

1999-04-21  Havoc Pennington  <hp@pobox.com>

	* bonobo/gnome-client-site.h
	bonobo/gnome-component-factory.h
	bonobo/gnome-component.h
	bonobo/gnome-container.h
	bonobo/gnome-dot.h
	bonobo/gnome-inplace-component.h
	bonobo/gnome-inplace-site.h
	bonobo/gnome-object.h
	bonobo/gnome-view.h
	bonobo/gtk-interfaces.h:
	Match BEGIN_GNOME_DECLS with END_GNOME_DECLS in these
	headers.

1999-04-16  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* bonobo/gnome-component.c (gnome_component_new_view): Use a
	GtkCover on top of the Socket.

	* bonobo/gtk-cover.c (gtk_cover_get_type): New file.  An InputOnly
	window used to cover embedded objects. 

1999-04-14  Tomislav Vujec  <tvujec@carnet.hr>

	* configure.in: remove second GNOME_INIT invocation.

	* bonobo/Makefile.am: $(includedir) should be on the end, because in
	$(srcdir) != $(builddir) scenario, bonobo picks up old headers from
	$(includedir)

1999-04-13  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* bonobo/gnome-object.c: #include "gtk-interfaces.h"

	* bonobo/gnome-file-moniker.c (gnome_file_moniker_new): Declare
	gfm_corba as "GNOME_Moniker gfm_corba", not "GNOME_Moniker *gfm_corba".

	* bonobo/gnome-client-site.c (impl_GNOME_client_site_save_object):
	Made static.

1999-04-11  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* bonobo/gnome-client-site.c (gnome_client_site_destroy): Unref
	the remote object here.
	(gnome_client_site_bind_component): Keep track of the remote
	object here. 

1999-04-07  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* bonobo/gnome-stream.c: Base class for stream implementations.
	
	* bonobo/gnome-storage-fs.c: Implemented sample file-system based
	storage. 

	* bonobo/gtk-interfaces.c (gtk_object_query_interface): Do the
	query interface on the hierarchy.

1999-03-31  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* bonobo/gnome-view.c: Use the new corba-class init framework.

1999-04-05  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* bonobo/gnome-object.c (impl_GNOME_object_query_interface): Make
	gnome_object_query_interface call gtk_object_query_interface.  We
	need to make gtk_object_query_interface walk the hierarchy
	optionally (ie, to ask for parent classes).  

	This fixes the first part of the problem.  Need to fix the next later.

1999-04-01  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* bonobo/gnome-file-moniker.c, bonobo/gnome-moniker.c: Initial
	implementations. 

1999-03-17  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* bonobo/gnome-bind-context.c: New file. 

1999-03-26  Timur Bakeyev <mc@bat.ru>

	* bonobo/Makefile.am: fixed library inclusion order in $(bonobo_libs).

1999-03-08  Martijn van Beers <martijn@earthling.net>

	* bonobo/Makefile.am: fixed double -I for orbit-idl
	* po/.cvsignore:
	* idl/.cvsignore: New files

1999-03-07  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* bonobo/gnome-inplace-site.c (init_inplace_corba_class): New file.

1999-02-16  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* bonobo/gnome-component.c: New file.  Implements a component.

	* bonobo/gnome-view.c (create_gnome_view): Simplify.
	(gnome_view_construct): New function.

	* bonobo/gnome-object.c (gnome_object_activate_servant): New
	function. 

	* bonobo/gnome-container.c: Implement.

1999-02-06  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* src/gnome-object.c (gnome_object_drop_binding,
	gnome_object_drop_binding_by_servant): New routines to drop the
	bindings by servant and by object.

	* src/gnome-main.c (bonobo_init): Bootstrap routine, plus helper
	routines. 

	* src/gnome-object.h: Provide an environment here.

1999-02-08  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* src/gtk-interfaces.c (gtk_get_interface): Apply the mixins patch
	from Tero.

1999-02-04  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* src/gtk-interfaces.c, src/gtk-interfaces.h: New files.
	Implements gtk-interfaces.
	(gtk_get_interface): Use destroy, not shutdown.

